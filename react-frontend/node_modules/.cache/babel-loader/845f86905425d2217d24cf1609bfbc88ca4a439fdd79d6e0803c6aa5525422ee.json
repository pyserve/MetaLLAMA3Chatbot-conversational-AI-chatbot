{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Weaver 15\\\\Documents\\\\Software_Tools\\\\MetaLLAMA3Chatbot-conversational-AI-chatbot\\\\react-frontend\\\\src\\\\components\\\\chatContainer.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../contexts/authContext\";\nimport { ChatContext } from \"../contexts/chatContext\";\nimport History from \"./history\";\nimport { Modal } from 'bootstrap';\nimport 'bootstrap/dist/js/bootstrap';\nimport $ from 'jquery';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatContainer = () => {\n  _s();\n  const navigate = useNavigate();\n  // const { chatId } = useParams();\n  const {\n    auth,\n    theme\n  } = useContext(AuthContext);\n  const {\n    chats,\n    setChats,\n    sessionId\n  } = useContext(ChatContext);\n  const [message, setMessage] = useState('');\n  const [editText, setEditText] = useState('');\n  const scrollRef = useRef(null);\n  const [disableBtn, setDisableBtn] = useState(true);\n  const [initialPrompt, setInitialPrompt] = useState({});\n  const [isRecording, setIsRecording] = useState(false);\n  // const [audioBlob, setAudioBlob] = useState(null);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const streamRef = useRef(null);\n  const modalRef = useRef(null);\n  const imageRef = useRef(null);\n  const formRef = useRef(null);\n  const messageRef = useRef(null);\n  const [imageSrc, setImageSrc] = useState(null);\n  const [modelImage, setModalImage] = useState(null);\n  const [showHistory, setShowHistory] = useState(true);\n  const DEEPGRAM_API_KEY = \"2ad747b7394a1ceeb64a9ee57c4581099f13d427\";\n  useEffect(() => {\n    if (sessionId) {\n      navigate(`/chat/${sessionId}`);\n      const fetchChats = async () => {\n        const resp = await fetch(\"http://127.0.0.1:8000/chats/\" + sessionId);\n        const result = await resp.json();\n        setChats(result.data);\n      };\n      fetchChats();\n    }\n  }, [sessionId, navigate, setChats]);\n  useEffect(() => {\n    if (auth.user) {\n      setInitialPrompt({\n        role: \"system\",\n        content: `\n                As a system memory or initial prompt, You are a Beaver Chatbot created by NextAI company. \n                Act like a chatbot model. Today is \n                ${new Date().toLocaleDateString() + new Date().toLocaleTimeString()} \n                The user chatting with you is \n                ${auth.user.first_name ? auth.user.first_name : auth.user.email}.\n                AI LLAMA3 model developed by Meta Facebook.\n                `\n      });\n    }\n  }, [auth]);\n  useEffect(() => {\n    if (message && message.trim() !== '') {\n      setDisableBtn(false);\n    } else {\n      setDisableBtn(true);\n    }\n  }, [message]);\n  useEffect(() => {\n    scrollRef.current.scrollTo({\n      top: scrollRef.current.scrollHeight,\n      behavior: 'smooth'\n    });\n    if (imageSrc) {\n      setTimeout(() => {\n        scrollRef.current.scrollTo({\n          top: scrollRef.current.scrollHeight,\n          behavior: 'smooth'\n        });\n      }, 1000);\n    }\n  }, [chats, imageSrc]);\n  const handleSubmit = async (e, msg) => {\n    e.preventDefault();\n    let query = {\n      role: \"user\",\n      content: msg ? msg : message,\n      image: imageRef.current.value ? URL.createObjectURL(imageRef.current.files[0]) : null\n    };\n    setMessage('');\n    setDisableBtn(true);\n    setChats(chats => [...chats, query]);\n    if (query.image) {\n      const formData = new FormData();\n      formData.append('image', imageRef.current.files[0]);\n      formData.append('question', query.content);\n      formData.append(\"uid\", auth.user.pk);\n      formData.append(\"sessionId\", sessionId);\n      clearImage();\n      const resp = await fetch(\"http://127.0.0.1:8000/image/\", {\n        method: \"POST\",\n        body: formData\n      });\n      if (resp.status === 200) {\n        const result = await resp.json();\n        setChats(chats => [...chats.slice(0, -1), result.user, result.assistant]);\n      }\n    } else {\n      const resp = await fetch(\"http://127.0.0.1:8000/\", {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          messages: [initialPrompt, ...chats, query],\n          uid: auth.user.pk,\n          sessionId: sessionId\n        })\n      });\n      if (resp.status === 200) {\n        const result = await resp.json();\n        setChats(chats => [...chats.slice(0, -1), result.user, result.assistant]);\n      }\n    }\n  };\n  const getMicrophoneAccess = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      streamRef.current = stream;\n      console.log('Microphone access granted');\n      return stream;\n    } catch (error) {\n      console.error('Microphone access denied: ', error);\n      return null;\n    }\n  };\n  const startRecording = async () => {\n    const stream = await getMicrophoneAccess();\n    if (stream) {\n      mediaRecorderRef.current = new MediaRecorder(stream);\n      audioChunksRef.current = [];\n      mediaRecorderRef.current.ondataavailable = e => {\n        audioChunksRef.current.push(e.data);\n      };\n      mediaRecorderRef.current.onstop = () => {\n        const audioBlob = new Blob(audioChunksRef.current, {\n          type: 'audio/webm'\n        });\n        // setAudioBlob(audioBlob);\n        uploadAudio(audioBlob);\n      };\n      mediaRecorderRef.current.start();\n      console.log('Recording started');\n      setIsRecording(true);\n    }\n  };\n  const stopRecording = () => {\n    mediaRecorderRef.current.stop();\n    setIsRecording(false);\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop()); // Stop all tracks\n      streamRef.current = null;\n    }\n    console.log(\"Recording stopped.\");\n  };\n  const uploadAudio = async audio => {\n    const arrayBuffer = await audio.arrayBuffer();\n    const response = await fetch('https://api.deepgram.com/v1/listen?language=en-GB', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'audio/webm',\n        'Authorization': `Token ${DEEPGRAM_API_KEY}`\n      },\n      body: arrayBuffer\n    });\n    const result = await response.json();\n    if (result.results && result.results.channels && result.results.channels[0] && result.results.channels[0].alternatives && result.results.channels[0].alternatives[0]) {\n      const transcribe_result = result.results.channels[0].alternatives[0].transcript;\n      setMessage(transcribe_result);\n      messageRef.current.focus();\n      console.log(transcribe_result);\n    }\n    // setAudioBlob(null);\n  };\n  const handleImageUpload = async e => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        setImageSrc(e.target.result);\n        messageRef.current.focus();\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const clearImage = () => {\n    setImageSrc(null);\n    if (imageRef.current) {\n      imageRef.current.value = null;\n    }\n  };\n  const openImagePreview = index => {\n    const result = chats.find((c, i) => i === index);\n    if (result.pk) {\n      setModalImage(\"http://127.0.0.1:8000/media/\" + result.image);\n    } else {\n      setModalImage(result.image);\n    }\n    const modal = new Modal(modalRef.current, {\n      keyboard: false\n    });\n    modal.show();\n  };\n  const textToSpeech = async (e, text) => {\n    if (window.speechSynthesis.speaking) {\n      window.speechSynthesis.cancel();\n      $(e.target).removeClass(\"fa-solid fa-volume-high\").addClass(\"fa-solid fa-volume-off\");\n    } else {\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.pitch = 1; // default is 1, range is 0 to 2\n      utterance.rate = 1; // default is 1, range is 0.1 to 10\n      utterance.volume = 1; // default is 1, range is 0 to 1\n      utterance.lang = 'en-US'; // language of the speech\n      utterance.voice = window.speechSynthesis.getVoices()[7];\n      utterance.onend = () => {\n        setTimeout(() => {\n          $(e.target).removeClass(\"fa-solid fa-volume-high\").addClass(\"fa-solid fa-volume-off\");\n        }, 250);\n      };\n      window.speechSynthesis.speak(utterance);\n    }\n  };\n  const regenerateResponse = async (e, index) => {\n    const results = index >= 0 && index < chats.length ? chats.splice(index - 1, 2) : null;\n    for (let result of results) {\n      let resp = await fetch(\"http://127.0.0.1:8000/?pk=\" + result.pk, {\n        method: \"DELETE\"\n      });\n      console.log(resp);\n    }\n    let chat = results.at(0);\n    setChats(chats);\n    if (chat.image) {\n      const response = await fetch(chat.image);\n      const blob = await response.blob();\n      const fileName = chat.image.split('/').pop();\n      const file = new File([blob], fileName, {\n        type: blob.type\n      });\n      const fileInput = imageRef.current;\n      const dataTransfer = new DataTransfer();\n      dataTransfer.items.add(file);\n      fileInput.files = dataTransfer.files;\n    }\n    handleSubmit(e, chat.content);\n  };\n  const escapeHtml = text => {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#039;');\n  };\n  const unescapeHtml = html => {\n    return html.replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&#039;/g, \"'\");\n  };\n  const formatContent = text => {\n    let formattedText = escapeHtml(text);\n    formattedText = formattedText.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n    formattedText = formattedText.replace(/```([\\s\\S]*?)```/g, `<div class=\"bg-secondary text-white border border-white px-3 rounded code-container\">\n                <div class=\"d-flex justify-content-end align-items-center small\">\n                    <div class=\"d-flex align-items-center copy-button\" type=\"button\">\n                        <i class=\"fa-regular fa-copy\"></i>\n                        <span class=\"ms-1\">Copy</span>\n                    </div>\n                </div><pre class=\"m-0 p-0\"><code>$1</code></pre>\n            </div>`);\n    formattedText = formattedText.replace(/`([^`]*)`/g, '<code>$1</code>');\n    formattedText = formattedText.replace(/\\n/g, '<br>');\n    return formattedText;\n  };\n  $(document).on('click', '.copy-button', function () {\n    let rawCode = $(this).closest(\".code-container\").find(\"code\").html();\n    let unescapedCode = unescapeHtml(rawCode);\n    let finalCode = unescapedCode.replace(/<br\\s*\\/?>/g, '\\n');\n    navigator.clipboard.writeText(finalCode).then(() => {\n      $(this).removeClass(\"text-white\").addClass(\"text-warning\");\n      $(this).find(\"i\").first().removeClass(\"fa-regular fa-copy\").addClass(\"fa-solid fa-check\");\n      $(this).find(\"span\").first().html(\"Copied!\");\n      setTimeout(() => {\n        $(this).removeClass(\"text-warning\").addClass(\"text-white\");\n        $(this).find(\"i\").first().removeClass(\"fa-solid fa-check\").addClass(\"fa-regular fa-copy\");\n        $(this).find(\"span\").first().html(\"Copy\");\n      }, 2000);\n    }).catch(err => {\n      console.log(err);\n    });\n  });\n  const handleDislikeResponse = async (e, idx) => {\n    let dislikedChat = chats.find((c, i) => i === idx);\n    const resp = await fetch(\"http://127.0.0.1:8000/?disliked=true\", {\n      method: \"PUT\",\n      body: JSON.stringify({\n        ...dislikedChat,\n        disliked: true\n      })\n    });\n    console.log(resp);\n    setChats(chats => chats.map((chat, i) => {\n      if (i === idx) {\n        return {\n          ...chat,\n          disliked: !chat.disliked\n        };\n      }\n      return chat;\n    }));\n  };\n  const handleHideEditTextbox = async (e, idx = null, send = null) => {\n    $(e.target).closest(\".chat-main-container\").first().find(\".chat-container\").first().removeClass(\"d-none\");\n    $(e.target).closest(\".chat-main-container\").first().find(\".chat-image\").first().removeClass(\"d-none\");\n    $(e.target).closest(\".chat-main-container\").first().find(\".chatTextbox\").first().addClass(\"d-none\");\n    if (idx !== null && send) {\n      const results = idx >= 0 && idx < chats.length - 1 ? chats.splice(idx, 2) : null;\n      for (let result of results) {\n        let resp = await fetch(\"http://127.0.0.1:8000/?pk=\" + result.pk, {\n          method: \"DELETE\"\n        });\n        console.log(resp);\n      }\n      setChats(chats);\n      handleSubmit(e, editText);\n      setEditText(\"\");\n    }\n  };\n  const handleShowEditTextbox = (e, index) => {\n    const filterChat = chats.find((c, i) => i === index);\n    if (filterChat) setEditText(filterChat.content);\n    $(e.target).closest(\".chat-main-container\").first().find(\".chat-container\").first().addClass(\"d-none\");\n    $(e.target).closest(\".chat-main-container\").first().find(\".chat-image\").first().addClass(\"d-none\");\n    $(e.target).closest(\".chat-main-container\").first().find(\".chatTextbox\").first().removeClass(\"d-none\");\n    $(e.target).closest(\".chat-main-container\").first().find(\"textarea\").first().focus();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container my-1\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pe-0 \" + (showHistory ? \"col-md-3\" : \"d-none\"),\n        children: /*#__PURE__*/_jsxDEV(History, {\n          show: showHistory,\n          toggleHistory: () => setShowHistory(h => !h)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 17\n      }, this), !showHistory && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"py-2 col-auto text-end text-\" + (theme === \"light\" ? \"dark\" : \"light\"),\n        onClick: () => setShowHistory(h => !h),\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          type: \"button\",\n          className: \"fa-solid fa-circle-chevron-right fs-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ps-1 \" + (showHistory ? \"col-md-9\" : \"col-md-11\"),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal fade\",\n          ref: modalRef,\n          \"data-bs-backdrop\": \"static\",\n          tabIndex: \"-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-dialog modal-fullscreen\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"modal-title fs-5\",\n                  id: \"imagePreviewLabel\",\n                  children: \"Preview Image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn-close\",\n                  \"data-bs-dismiss\": \"modal\",\n                  \"aria-label\": \"Close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-body position-absolute top-50 start-50 translate-middle\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: modelImage,\n                  alt: \"\",\n                  className: \"w-100\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `card border-0 shadow-lg`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `card-body p-0 bg-${theme === \"light\" ? \"white\" : \"secondary\"} text-${theme === \"light\" ? \"dark\" : \"light\"}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overflow-auto my-1 px-3 d-flex flex-column-reverse\",\n              style: {\n                minHeight: '80vh',\n                maxHeight: '80vh'\n              },\n              ref: scrollRef,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex flex-column\",\n                children: [chats.map((chat, idx) => {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [chat.role === \"user\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex justify-content-end p-2 my-1\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"d-flex justify-content-end align-items-start w-80 chat-main-container\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"me-2\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"d-flex justify-content-end\",\n                            children: [chat.image && chat.pk && /*#__PURE__*/_jsxDEV(\"img\", {\n                              src: chat.image ? \"http://127.0.0.1:8000/media/\" + chat.image : null,\n                              alt: \"\",\n                              className: \"chat-image rounded py-1\",\n                              type: \"button\",\n                              onClick: () => openImagePreview(idx)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 419,\n                              columnNumber: 61\n                            }, this), chat.image && !chat.pk && /*#__PURE__*/_jsxDEV(\"img\", {\n                              src: chat.image,\n                              alt: \"\",\n                              className: \"chat-image rounded py-1\",\n                              type: \"button\",\n                              onClick: () => openImagePreview(idx)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 425,\n                              columnNumber: 61\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 417,\n                            columnNumber: 57\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"d-flex align-items-start chat-container\",\n                            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"me-2 edit-chat\",\n                              onClick: e => handleShowEditTextbox(e, idx),\n                              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"btn btn-light rounded-circle\",\n                                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                                  className: \"fa-solid fa-pencil small\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 432,\n                                  columnNumber: 69\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 431,\n                                columnNumber: 65\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 430,\n                              columnNumber: 61\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: `w-100 bg-custom-${theme}`,\n                              style: {\n                                whiteSpace: \"pre-wrap\"\n                              },\n                              children: chat.content\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 435,\n                              columnNumber: 61\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 429,\n                            columnNumber: 57\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 416,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-100 chatTextbox d-none\",\n                          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                            className: \"form-control rounded-4 bg-light\",\n                            rows: 4,\n                            onFocus: e => {\n                              e.target.style.height = 'auto';\n                              e.target.style.height = `${e.target.scrollHeight}px`;\n                            },\n                            value: editText,\n                            onChange: e => {\n                              setEditText(e.target.value);\n                              e.target.style.height = 'auto';\n                              e.target.style.height = `${e.target.scrollHeight}px`;\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 442,\n                            columnNumber: 57\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"d-flex justify-content-end\",\n                            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                              className: \"m-1 btn btn-sm btn-light\",\n                              onClick: e => handleHideEditTextbox(e),\n                              children: \"Cancel\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 455,\n                              columnNumber: 61\n                            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                              className: \"m-1 btn btn-sm btn-dark\",\n                              onClick: e => handleHideEditTextbox(e, idx, true),\n                              children: \"Send\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 457,\n                              columnNumber: 61\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 454,\n                            columnNumber: 57\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 441,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"ms-1 fs-3\",\n                          children: /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"d-inline-flex align-items-center justify-content-center text-capitalize fs-6 text-white bg-danger rounded-circle border border-white\",\n                            style: {\n                              width: '1.75rem',\n                              height: '1.75rem'\n                            },\n                            children: auth.user.email.charAt(0)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 462,\n                            columnNumber: 57\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 461,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 415,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 414,\n                      columnNumber: 45\n                    }, this), chat.role === \"assistant\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex justify-content-start p-2 my-2\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"d-flex justify-content-start align-items-start w-80\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"me-1 fs-3\",\n                          children: /*#__PURE__*/_jsxDEV(\"img\", {\n                            src: \"/img/beaver.jpeg\",\n                            alt: \"\",\n                            className: \"reply-image rounded-circle\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 473,\n                            columnNumber: 57\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 472,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"ms-2 overflow-auto\",\n                          style: {\n                            maxWidth: '100vw'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                            dangerouslySetInnerHTML: {\n                              __html: formatContent(chat.content)\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 477,\n                            columnNumber: 57\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"my-1 text-opacity-75 text-\" + (theme === \"light\" ? \"dark\" : \"light\"),\n                            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"me-2\",\n                              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                                type: \"button\",\n                                className: \"fa-regular fa-clipboard\",\n                                onClick: e => {\n                                  $(e.target).removeClass(\"fa-regular fa-clipboard\").addClass(\"fa-solid fa-check\");\n                                  navigator.clipboard.writeText(chat.content).then(() => {\n                                    console.log('Text copied to clipboard successfully!');\n                                  }).catch(err => {\n                                    console.error('Could not copy text: ', err);\n                                  });\n                                  setTimeout(() => {\n                                    $(e.target).removeClass(\"fa-solid fa-check\").addClass(\"fa-regular fa-clipboard\");\n                                  }, 2000);\n                                }\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 482,\n                                columnNumber: 65\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 481,\n                              columnNumber: 61\n                            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"mx-2\",\n                              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                                type: \"button\",\n                                className: \"fa-solid fa-volume-off\",\n                                onClick: e => {\n                                  $(e.target).removeClass(\"fa-solid fa-volume-off\").addClass(\"fa-solid fa-volume-high\");\n                                  textToSpeech(e, chat.content);\n                                }\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 496,\n                                columnNumber: 65\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 495,\n                              columnNumber: 61\n                            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"mx-2\",\n                              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                                type: \"button\",\n                                className: \"fa-\" + (chat.disliked ? \"solid\" : \"regular\") + \" fa-thumbs-down\",\n                                onClick: e => handleDislikeResponse(e, idx)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 503,\n                                columnNumber: 65\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 502,\n                              columnNumber: 61\n                            }, this), idx === chats.length - 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"ms-2\",\n                              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                                type: \"button\",\n                                className: \"fa-solid fa-arrows-rotate\",\n                                onClick: e => {\n                                  regenerateResponse(e, idx);\n                                }\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 508,\n                                columnNumber: 65\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 507,\n                              columnNumber: 61\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 480,\n                            columnNumber: 57\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 476,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 471,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 470,\n                      columnNumber: 45\n                    }, this)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 412,\n                    columnNumber: 41\n                  }, this);\n                }), chats.filter(chat => chat.role === \"user\").length > chats.filter(chat => chat.role === \"assistant\").length && chats.at(-1).role === \"user\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex flex-column-reverse justify-content-start my-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex align-items-center bg-white p-2 rounded-pill\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"spinner-grow spinner-grow-sm text-danger mx-1\",\n                      role: \"status\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 525,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"spinner-grow spinner-grow-sm text-success mx-1\",\n                      role: \"status\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 527,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"spinner-grow spinner-grow-sm text-primary mx-1\",\n                      role: \"status\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 529,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 524,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 33\n                }, this), imageSrc && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-center align-items-start my-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card shadow-lg position-relative\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"card-header p-0\",\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: imageSrc,\n                        alt: \"\",\n                        className: \"uploaded-image\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 538,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 537,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"position-absolute end-0 m-1\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"btn btn-danger rounded-circle\",\n                        onClick: clearImage,\n                        children: /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"fa fa-close\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 542,\n                          columnNumber: 49\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 541,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 540,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 536,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `${theme === \"light\" ? \"bg-light\" : \"\"} border-top p-3 rounded-0`,\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                ref: formRef,\n                onSubmit: handleSubmit,\n                className: \"bg-white rounded-pill\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex align-items-center form-inputs\",\n                  children: [isRecording ? /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-light ms-2 me-1 border rounded-pill\",\n                    type: \"button\",\n                    onClick: stopRecording,\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger spinner-grow spinner-grow-sm\",\n                      \"aria-hidden\": \"true\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 558,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 556,\n                    columnNumber: 45\n                  }, this) : /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"btn btn-light ms-2 me-1 border rounded-pill\",\n                    onClick: isRecording ? stopRecording : startRecording,\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"px-1 fa-solid fa-microphone-lines\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 563,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 561,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"image\",\n                    className: \"btn btn-light mx-1 border rounded-pill\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fa-regular fa-images\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 567,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 566,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    id: \"image\",\n                    className: \"d-none\",\n                    accept: \"image/*\",\n                    ref: imageRef,\n                    onChange: e => handleImageUpload(e)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 569,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    type: \"text\",\n                    placeholder: \"Chat with BeaverAI\",\n                    className: \"form-control border-0 rounded-0 py-3 overflow-auto d-flex flex-column\",\n                    rows: 1,\n                    ref: messageRef,\n                    value: message,\n                    onChange: e => setMessage(e.target.value),\n                    onKeyDown: e => {\n                      if (e.key === 'Enter' && !e.shiftKey) {\n                        e.preventDefault();\n                        formRef.current.requestSubmit();\n                      }\n                    },\n                    style: {\n                      resize: 'none',\n                      maxHeight: `${200}px`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 571,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: `btn btn-${disableBtn ? \"secondary\" : \"dark\"} rounded-pill ms-1 me-2`,\n                    type: \"submit\",\n                    disabled: disableBtn,\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"p-1 fa fa-arrow-up\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 586,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 584,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 553,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 29\n            }, this), chats.length === 0 && !imageSrc && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"position-absolute top-50 start-50 translate-middle text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card text-center shadow-lg p-2 w-100\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `card-body py-5 bg-${theme} text-${theme === \"light\" ? \"dark\" : \"light\"}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"card-title fs-3\",\n                    children: \"Hey! What's up ?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 595,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"card-text\",\n                    children: \"I'm Beaver chatbot. An intelligent chatbot from Beaver Intelligence Corp.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 596,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"spinner-grow text-primary\",\n                    role: \"status\",\n                    children: \" \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 597,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"spinner-grow text-success\",\n                    role: \"status\",\n                    children: \" \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 598,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"spinner-grow text-danger\",\n                    role: \"status\",\n                    children: \" \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 599,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"spinner-grow text-warning\",\n                    role: \"status\",\n                    children: \" \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 600,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"spinner-grow text-info\",\n                    role: \"status\",\n                    children: \" \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 601,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-5 fs-5\",\n                    children: \"What's on your mind ?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 602,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-italic\",\n                    children: \"Please go a head and write it over whatever it is!\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 603,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 594,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 379,\n    columnNumber: 9\n  }, this);\n};\n_s(ChatContainer, \"yzN5K2gBfYqQ5FPJnNuR1rsYehM=\", false, function () {\n  return [useNavigate];\n});\n_c = ChatContainer;\nexport default ChatContainer;\nvar _c;\n$RefreshReg$(_c, \"ChatContainer\");","map":{"version":3,"names":["useState","useEffect","useRef","useContext","useNavigate","AuthContext","ChatContext","History","Modal","$","jsxDEV","_jsxDEV","ChatContainer","_s","navigate","auth","theme","chats","setChats","sessionId","message","setMessage","editText","setEditText","scrollRef","disableBtn","setDisableBtn","initialPrompt","setInitialPrompt","isRecording","setIsRecording","mediaRecorderRef","audioChunksRef","streamRef","modalRef","imageRef","formRef","messageRef","imageSrc","setImageSrc","modelImage","setModalImage","showHistory","setShowHistory","DEEPGRAM_API_KEY","fetchChats","resp","fetch","result","json","data","user","role","content","Date","toLocaleDateString","toLocaleTimeString","first_name","email","trim","current","scrollTo","top","scrollHeight","behavior","setTimeout","handleSubmit","e","msg","preventDefault","query","image","value","URL","createObjectURL","files","formData","FormData","append","pk","clearImage","method","body","status","slice","assistant","headers","JSON","stringify","messages","uid","getMicrophoneAccess","stream","navigator","mediaDevices","getUserMedia","audio","console","log","error","startRecording","MediaRecorder","ondataavailable","push","onstop","audioBlob","Blob","type","uploadAudio","start","stopRecording","stop","getTracks","forEach","track","arrayBuffer","response","results","channels","alternatives","transcribe_result","transcript","focus","handleImageUpload","file","target","reader","FileReader","onload","readAsDataURL","openImagePreview","index","find","c","i","modal","keyboard","show","textToSpeech","text","window","speechSynthesis","speaking","cancel","removeClass","addClass","utterance","SpeechSynthesisUtterance","pitch","rate","volume","lang","voice","getVoices","onend","speak","regenerateResponse","length","splice","chat","at","blob","fileName","split","pop","File","fileInput","dataTransfer","DataTransfer","items","add","escapeHtml","replace","unescapeHtml","html","formatContent","formattedText","document","on","rawCode","closest","unescapedCode","finalCode","clipboard","writeText","then","first","catch","err","handleDislikeResponse","idx","dislikedChat","disliked","map","handleHideEditTextbox","send","handleShowEditTextbox","filterChat","className","children","toggleHistory","h","_jsxFileName","lineNumber","columnNumber","onClick","ref","tabIndex","id","src","alt","style","minHeight","maxHeight","whiteSpace","rows","onFocus","height","onChange","width","charAt","maxWidth","dangerouslySetInnerHTML","__html","filter","onSubmit","htmlFor","accept","placeholder","onKeyDown","key","shiftKey","requestSubmit","resize","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Weaver 15/Documents/Software_Tools/MetaLLAMA3Chatbot-conversational-AI-chatbot/react-frontend/src/components/chatContainer.jsx"],"sourcesContent":["import { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"../contexts/authContext\";\r\nimport { ChatContext } from \"../contexts/chatContext\";\r\nimport History from \"./history\";\r\nimport { Modal } from 'bootstrap';\r\nimport 'bootstrap/dist/js/bootstrap';\r\nimport $ from 'jquery';\r\n\r\nconst ChatContainer = () => {\r\n    const navigate = useNavigate();\r\n    // const { chatId } = useParams();\r\n    const { auth, theme } = useContext(AuthContext);\r\n    const { chats, setChats, sessionId } = useContext(ChatContext);\r\n    const [message, setMessage] = useState('');\r\n    const [editText, setEditText] = useState('');\r\n    const scrollRef = useRef(null);\r\n    const [disableBtn, setDisableBtn] = useState(true);\r\n    const [initialPrompt, setInitialPrompt] = useState({});\r\n    const [isRecording, setIsRecording] = useState(false);\r\n    // const [audioBlob, setAudioBlob] = useState(null);\r\n    const mediaRecorderRef = useRef(null);\r\n    const audioChunksRef = useRef([]);\r\n    const streamRef = useRef(null);\r\n    const modalRef = useRef(null);\r\n    const imageRef = useRef(null);\r\n    const formRef = useRef(null);\r\n    const messageRef = useRef(null);\r\n    const [imageSrc, setImageSrc] = useState(null);\r\n    const [modelImage, setModalImage] = useState(null);\r\n    const [showHistory, setShowHistory] = useState(true);\r\n    const DEEPGRAM_API_KEY = \"2ad747b7394a1ceeb64a9ee57c4581099f13d427\";\r\n\r\n    useEffect(() => {\r\n        if(sessionId){\r\n            navigate(`/chat/${sessionId}`);\r\n            const fetchChats = async () => {\r\n                const resp = await fetch(\"http://127.0.0.1:8000/chats/\" + sessionId);\r\n                const result = await resp.json();\r\n                setChats(result.data);\r\n            }\r\n            fetchChats(); \r\n        }\r\n    }, [sessionId, navigate, setChats])\r\n\r\n    useEffect(() => {\r\n        if(auth.user){\r\n            setInitialPrompt({\r\n                role: \"system\",\r\n                content: `\r\n                As a system memory or initial prompt, You are a Beaver Chatbot created by NextAI company. \r\n                Act like a chatbot model. Today is \r\n                ${new Date().toLocaleDateString() + new Date().toLocaleTimeString()} \r\n                The user chatting with you is \r\n                ${(auth.user.first_name ? auth.user.first_name : auth.user.email)}.\r\n                AI LLAMA3 model developed by Meta Facebook.\r\n                `\r\n            })\r\n        }\r\n    }, [auth]);\r\n\r\n    useEffect(() => {\r\n        if (message && message.trim() !== '') {\r\n          setDisableBtn(false);\r\n        } else {\r\n          setDisableBtn(true);\r\n        }\r\n    }, [message]);\r\n    \r\n    useEffect(() => {\r\n        scrollRef.current.scrollTo({\r\n            top: scrollRef.current.scrollHeight,\r\n            behavior: 'smooth'\r\n        });\r\n        if (imageSrc) {\r\n            setTimeout(() => {\r\n                scrollRef.current.scrollTo({\r\n                    top: scrollRef.current.scrollHeight,\r\n                    behavior: 'smooth'\r\n                });\r\n            }, 1000);\r\n        }\r\n    }, [chats, imageSrc]);\r\n\r\n    const handleSubmit = async (e, msg) => {\r\n        e.preventDefault();\r\n        let query = {\r\n            role: \"user\", \r\n            content: msg ? msg : message, \r\n            image: imageRef.current.value ? URL.createObjectURL(imageRef.current.files[0]) : null,\r\n        }\r\n        setMessage('');\r\n        setDisableBtn(true);\r\n        setChats(chats => [...chats, query]);\r\n        if(query.image){\r\n            const formData = new FormData();\r\n            formData.append('image', imageRef.current.files[0]);\r\n            formData.append('question', query.content);\r\n            formData.append(\"uid\", auth.user.pk);\r\n            formData.append(\"sessionId\", sessionId);\r\n            clearImage();\r\n            const resp = await fetch(\"http://127.0.0.1:8000/image/\",{\r\n                method: \"POST\",\r\n                body: formData\r\n            });\r\n\r\n            if(resp.status === 200){\r\n                const result = await resp.json();\r\n                setChats(chats => (\r\n                    [\r\n                        ...chats.slice(0, -1), \r\n                        result.user, \r\n                        result.assistant\r\n                    ]\r\n                ));\r\n            }\r\n        }\r\n        else{\r\n            const resp = await fetch(\"http://127.0.0.1:8000/\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    messages: [initialPrompt, ...chats, query],\r\n                    uid: auth.user.pk,\r\n                    sessionId: sessionId,\r\n                })\r\n            });\r\n\r\n            if(resp.status === 200){\r\n                const result = await resp.json();\r\n                setChats(chats => [...chats.slice(0, -1), result.user, result.assistant]);\r\n            }\r\n        }\r\n    }\r\n\r\n    const getMicrophoneAccess = async() => {\r\n        try{\r\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true});\r\n            streamRef.current = stream;\r\n            console.log('Microphone access granted');\r\n            return stream;\r\n        }catch(error){\r\n            console.error('Microphone access denied: ', error);\r\n            return null;\r\n        }\r\n    }\r\n    \r\n    const startRecording = async() => {\r\n        const stream = await getMicrophoneAccess();\r\n        if(stream){\r\n            mediaRecorderRef.current = new MediaRecorder(stream);\r\n            audioChunksRef.current = [];\r\n\r\n            mediaRecorderRef.current.ondataavailable = (e) => {\r\n                audioChunksRef.current.push(e.data)\r\n            };\r\n\r\n            mediaRecorderRef.current.onstop = () => {\r\n                const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\r\n                // setAudioBlob(audioBlob);\r\n                uploadAudio(audioBlob);\r\n            };\r\n\r\n            mediaRecorderRef.current.start();\r\n            console.log('Recording started');\r\n            setIsRecording(true);\r\n        }\r\n    }\r\n\r\n    const stopRecording = () => {\r\n        mediaRecorderRef.current.stop()\r\n        setIsRecording(false);\r\n        if (streamRef.current) {\r\n            streamRef.current.getTracks().forEach(track => track.stop()); // Stop all tracks\r\n            streamRef.current = null;\r\n        }\r\n        console.log(\"Recording stopped.\");\r\n    }\r\n\r\n    const uploadAudio = async (audio) => {\r\n        const arrayBuffer = await audio.arrayBuffer();\r\n        const response = await fetch('https://api.deepgram.com/v1/listen?language=en-GB', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'audio/webm',\r\n                'Authorization': `Token ${DEEPGRAM_API_KEY}`\r\n            },\r\n            body: arrayBuffer\r\n        });\r\n    \r\n        const result = await response.json();\r\n        if (result.results && result.results.channels && result.results.channels[0] && \r\n            result.results.channels[0].alternatives && result.results.channels[0].alternatives[0]) {\r\n            const transcribe_result = result.results.channels[0].alternatives[0].transcript;\r\n            setMessage(transcribe_result);\r\n            messageRef.current.focus();\r\n            console.log(transcribe_result)\r\n        }\r\n        // setAudioBlob(null);\r\n    }\r\n\r\n    const handleImageUpload = async(e) => {\r\n        const file = e.target.files[0];\r\n        if(file){\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                setImageSrc(e.target.result);\r\n                messageRef.current.focus();\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    }\r\n\r\n    const clearImage = () => {\r\n        setImageSrc(null);\r\n        if (imageRef.current) {\r\n          imageRef.current.value = null;\r\n        }\r\n    };\r\n\r\n    const openImagePreview = (index) => {\r\n        const result = chats.find((c, i) => i === index);\r\n        if(result.pk){\r\n            setModalImage(\"http://127.0.0.1:8000/media/\" + result.image);\r\n        }else{\r\n            setModalImage(result.image);\r\n        }\r\n        const modal = new Modal(modalRef.current, {\r\n            keyboard: false\r\n        });\r\n        modal.show();\r\n    }\r\n\r\n    const textToSpeech = async (e, text) => {\r\n        if (window.speechSynthesis.speaking) {\r\n            window.speechSynthesis.cancel();\r\n            $(e.target).removeClass(\"fa-solid fa-volume-high\").addClass(\"fa-solid fa-volume-off\");\r\n        }else{\r\n            const utterance = new SpeechSynthesisUtterance(text);\r\n            utterance.pitch = 1; // default is 1, range is 0 to 2\r\n            utterance.rate = 1;  // default is 1, range is 0.1 to 10\r\n            utterance.volume = 1; // default is 1, range is 0 to 1\r\n            utterance.lang = 'en-US'; // language of the speech\r\n            utterance.voice =  window.speechSynthesis.getVoices()[7];\r\n            utterance.onend = () => {\r\n                setTimeout(() => {\r\n                    $(e.target).removeClass(\"fa-solid fa-volume-high\").addClass(\"fa-solid fa-volume-off\");\r\n                }, 250);\r\n            }\r\n            window.speechSynthesis.speak(utterance);\r\n        }\r\n    }\r\n\r\n    const regenerateResponse = async (e, index) => {\r\n        const results = (index >= 0 && index < chats.length) ? chats.splice(index-1, 2) : null;\r\n        for(let result of results){\r\n            let resp = await fetch(\"http://127.0.0.1:8000/?pk=\" + result.pk, {\r\n                method: \"DELETE\"\r\n            });\r\n            console.log(resp);\r\n        }\r\n        let chat = results.at(0);\r\n        setChats(chats);\r\n\r\n        if(chat.image){\r\n            const response = await fetch(chat.image);\r\n            const blob = await response.blob();\r\n            const fileName = chat.image.split('/').pop();\r\n            const file = new File([blob], fileName, { type: blob.type });\r\n            const fileInput = imageRef.current;\r\n            const dataTransfer = new DataTransfer();\r\n            dataTransfer.items.add(file);\r\n            fileInput.files = dataTransfer.files;\r\n        }\r\n        handleSubmit(e, chat.content);\r\n    }\r\n\r\n    const escapeHtml = (text) => {\r\n        return text\r\n            .replace(/&/g, '&amp;')\r\n            .replace(/</g, '&lt;')\r\n            .replace(/>/g, '&gt;')\r\n            .replace(/\"/g, '&quot;')\r\n            .replace(/'/g, '&#039;');\r\n    };\r\n\r\n    const unescapeHtml = (html) => {\r\n        return html\r\n            .replace(/&amp;/g, '&')\r\n            .replace(/&lt;/g, '<')\r\n            .replace(/&gt;/g, '>')\r\n            .replace(/&quot;/g, '\"')\r\n            .replace(/&#039;/g, \"'\");\r\n    };\r\n    \r\n    const formatContent = (text) => {\r\n        let formattedText = escapeHtml(text);\r\n        formattedText = formattedText.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\r\n        formattedText = formattedText.replace(/```([\\s\\S]*?)```/g, \r\n            `<div class=\"bg-secondary text-white border border-white px-3 rounded code-container\">\r\n                <div class=\"d-flex justify-content-end align-items-center small\">\r\n                    <div class=\"d-flex align-items-center copy-button\" type=\"button\">\r\n                        <i class=\"fa-regular fa-copy\"></i>\r\n                        <span class=\"ms-1\">Copy</span>\r\n                    </div>\r\n                </div><pre class=\"m-0 p-0\"><code>$1</code></pre>\r\n            </div>`);\r\n        formattedText = formattedText.replace(/`([^`]*)`/g, '<code>$1</code>');\r\n        formattedText = formattedText.replace(/\\n/g, '<br>');\r\n        return formattedText;\r\n    };\r\n    \r\n    $(document).on('click', '.copy-button', function() {\r\n        let rawCode = $(this).closest(\".code-container\").find(\"code\").html();\r\n        let unescapedCode = unescapeHtml(rawCode);\r\n        let finalCode = unescapedCode.replace(/<br\\s*\\/?>/g, '\\n');\r\n        navigator.clipboard.writeText(finalCode).then(() => {\r\n            $(this).removeClass(\"text-white\").addClass(\"text-warning\");\r\n            $(this).find(\"i\").first().removeClass(\"fa-regular fa-copy\").addClass(\"fa-solid fa-check\");\r\n            $(this).find(\"span\").first().html(\"Copied!\");\r\n            setTimeout(() => {\r\n                $(this).removeClass(\"text-warning\").addClass(\"text-white\");\r\n                $(this).find(\"i\").first().removeClass(\"fa-solid fa-check\").addClass(\"fa-regular fa-copy\");\r\n                $(this).find(\"span\").first().html(\"Copy\");\r\n            }, 2000);\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        });\r\n    });\r\n\r\n    const handleDislikeResponse = async (e, idx) => {\r\n        let dislikedChat = chats.find((c, i) => i===idx);\r\n        const resp = await fetch(\"http://127.0.0.1:8000/?disliked=true\", {\r\n            method: \"PUT\",\r\n            body: JSON.stringify({\r\n                ...dislikedChat,\r\n                disliked: true,\r\n            })\r\n        });\r\n        console.log(resp)\r\n        setChats(chats => chats.map((chat, i) => {\r\n            if(i === idx){\r\n                return {...chat, disliked: !chat.disliked}\r\n            }\r\n            return chat;\r\n        }))\r\n    }\r\n\r\n    const handleHideEditTextbox = async (e, idx=null, send=null) => {\r\n        $(e.target).closest(\".chat-main-container\").first().find(\".chat-container\").first().removeClass(\"d-none\");\r\n        $(e.target).closest(\".chat-main-container\").first().find(\".chat-image\").first().removeClass(\"d-none\");\r\n        $(e.target).closest(\".chat-main-container\").first().find(\".chatTextbox\").first().addClass(\"d-none\");\r\n        if(idx !== null && send){\r\n            const results = (idx >= 0 && idx < chats.length - 1) ? chats.splice(idx, 2) : null;\r\n            for(let result of results){\r\n                let resp = await fetch(\"http://127.0.0.1:8000/?pk=\" + result.pk, {\r\n                    method: \"DELETE\"\r\n                });\r\n                console.log(resp);\r\n            }\r\n            setChats(chats);\r\n            handleSubmit(e, editText);\r\n            setEditText(\"\");\r\n        }\r\n    }\r\n\r\n    const handleShowEditTextbox = (e, index) => {\r\n        const filterChat = chats.find((c, i) => i === index)\r\n        if(filterChat) setEditText(filterChat.content);\r\n        $(e.target).closest(\".chat-main-container\").first().find(\".chat-container\").first().addClass(\"d-none\");\r\n        $(e.target).closest(\".chat-main-container\").first().find(\".chat-image\").first().addClass(\"d-none\");\r\n        $(e.target).closest(\".chat-main-container\").first().find(\".chatTextbox\").first().removeClass(\"d-none\");\r\n        $(e.target).closest(\".chat-main-container\").first().find(\"textarea\").first().focus();\r\n    }\r\n\r\n    return(\r\n        <div className=\"container my-1\">\r\n            <div className=\"row justify-content-center\">\r\n                <div className={\"pe-0 \" + (showHistory ? \"col-md-3\" : \"d-none\")}>\r\n                    <History show={showHistory} toggleHistory={() => setShowHistory(h => !h)} />\r\n                </div>\r\n                {!showHistory &&\r\n                <div className={\"py-2 col-auto text-end text-\" + (theme === \"light\" ? \"dark\" : \"light\")} \r\n                    onClick={() => setShowHistory(h => !h)}>\r\n                    <i type=\"button\" className=\"fa-solid fa-circle-chevron-right fs-4\"></i>    \r\n                </div>}\r\n\r\n                <div className={\"ps-1 \" + (showHistory ? \"col-md-9\": \"col-md-11\")}>\r\n                    <div className=\"modal fade\" ref={modalRef} data-bs-backdrop=\"static\" tabIndex=\"-1\">\r\n                        <div className=\"modal-dialog modal-fullscreen\">\r\n                            <div className=\"modal-content\">\r\n                                <div className=\"modal-header\">\r\n                                    <h1 className=\"modal-title fs-5\" id=\"imagePreviewLabel\">Preview Image</h1>\r\n                                    <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                                </div>\r\n                                <div className=\"modal-body position-absolute top-50 start-50 translate-middle\">\r\n                                    <img src={modelImage} alt=\"\" className=\"w-100\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={`card border-0 shadow-lg`}>\r\n                        <div className={`card-body p-0 bg-${theme === \"light\" ? \"white\": \"secondary\"} text-${theme === \"light\" ? \"dark\": \"light\"}`}>\r\n                            <div className=\"overflow-auto my-1 px-3 d-flex flex-column-reverse\" \r\n                                style={{minHeight: '80vh', maxHeight: '80vh',}}\r\n                                ref={scrollRef}>\r\n                                <div className=\"d-flex flex-column\">\r\n                                {chats.map((chat, idx) => {\r\n                                    return(\r\n                                        <div key={idx}>\r\n                                            {chat.role === \"user\" &&\r\n                                            <div className=\"d-flex justify-content-end p-2 my-1\">\r\n                                                <div className=\"d-flex justify-content-end align-items-start w-80 chat-main-container\">\r\n                                                    <div className=\"me-2\">\r\n                                                        <div className=\"d-flex justify-content-end\">\r\n                                                            {(chat.image && chat.pk) &&\r\n                                                            <img src={chat.image ? (\"http://127.0.0.1:8000/media/\" + chat.image): null} \r\n                                                                alt=\"\" className=\"chat-image rounded py-1\" \r\n                                                                type=\"button\" onClick={() => openImagePreview(idx)}></img>\r\n                                                            }\r\n\r\n                                                            {(chat.image && !chat.pk) &&\r\n                                                            <img src={chat.image} alt=\"\" className=\"chat-image rounded py-1\" \r\n                                                                type=\"button\" onClick={() => openImagePreview(idx)}></img>\r\n                                                            }     \r\n                                                        </div>  \r\n                                                        <div className=\"d-flex align-items-start chat-container\">\r\n                                                            <div className=\"me-2 edit-chat\" onClick={e => handleShowEditTextbox(e, idx)}>\r\n                                                                <span className=\"btn btn-light rounded-circle\">\r\n                                                                    <i className=\"fa-solid fa-pencil small\"></i>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                            <div className={`w-100 bg-custom-${theme}`} \r\n                                                                style={{whiteSpace: \"pre-wrap\"}}>\r\n                                                                {chat.content}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"w-100 chatTextbox d-none\">\r\n                                                        <textarea className=\"form-control rounded-4 bg-light\"\r\n                                                            rows={4}\r\n                                                            onFocus={e => {\r\n                                                                e.target.style.height = 'auto';\r\n                                                                e.target.style.height = `${e.target.scrollHeight}px`;\r\n                                                            }}\r\n                                                            value={editText}\r\n                                                            onChange={e => {\r\n                                                                setEditText(e.target.value);\r\n                                                                e.target.style.height = 'auto';\r\n                                                                e.target.style.height = `${e.target.scrollHeight}px`;\r\n                                                            }}></textarea>\r\n                                                        <div className=\"d-flex justify-content-end\">\r\n                                                            <button className=\"m-1 btn btn-sm btn-light\"\r\n                                                                onClick={e => handleHideEditTextbox(e)}>Cancel</button>\r\n                                                            <button className=\"m-1 btn btn-sm btn-dark\"\r\n                                                                onClick={e => handleHideEditTextbox(e, idx, true)}>Send</button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <span className=\"ms-1 fs-3\">\r\n                                                        <span className=\"d-inline-flex align-items-center justify-content-center text-capitalize fs-6 text-white bg-danger rounded-circle border border-white\" \r\n                                                            style={{ width: '1.75rem', height: '1.75rem' }}>\r\n                                                            {auth.user.email.charAt(0)}\r\n                                                        </span>\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>}\r\n                                            {chat.role === \"assistant\" &&\r\n                                            <div className=\"d-flex justify-content-start p-2 my-2\">\r\n                                                <div className=\"d-flex justify-content-start align-items-start w-80\">\r\n                                                    <span className=\"me-1 fs-3\">\r\n                                                        <img src=\"/img/beaver.jpeg\" alt=\"\" \r\n                                                            className=\"reply-image rounded-circle\" />\r\n                                                    </span>\r\n                                                    <div className=\"ms-2 overflow-auto\" style={{maxWidth: '100vw'}}>\r\n                                                        <span \r\n                                                            dangerouslySetInnerHTML={{__html: formatContent(chat.content)}}>\r\n                                                        </span>\r\n                                                        <div className={\"my-1 text-opacity-75 text-\" + (theme === \"light\" ? \"dark\" : \"light\") }>\r\n                                                            <span className=\"me-2\">\r\n                                                                <i type=\"button\" className=\"fa-regular fa-clipboard\"\r\n                                                                    onClick={e => {\r\n                                                                        $(e.target).removeClass(\"fa-regular fa-clipboard\").addClass(\"fa-solid fa-check\");\r\n                                                                        navigator.clipboard.writeText(chat.content).then(() => {\r\n                                                                            console.log('Text copied to clipboard successfully!');\r\n                                                                        }).catch((err) => {\r\n                                                                            console.error('Could not copy text: ', err);\r\n                                                                        });\r\n                                                                        setTimeout(() => {\r\n                                                                            $(e.target).removeClass(\"fa-solid fa-check\").addClass(\"fa-regular fa-clipboard\");\r\n                                                                        }, 2000)\r\n                                                                    }}></i>\r\n                                                            </span>\r\n                                                            <span className=\"mx-2\">\r\n                                                                <i type=\"button\" className=\"fa-solid fa-volume-off\"\r\n                                                                    onClick={e => {\r\n                                                                        $(e.target).removeClass(\"fa-solid fa-volume-off\").addClass(\"fa-solid fa-volume-high\");\r\n                                                                        textToSpeech(e, chat.content);\r\n                                                                    }}></i>\r\n                                                            </span>\r\n                                                            <span className=\"mx-2\">\r\n                                                                <i type=\"button\" className={\"fa-\"+ (chat.disliked ? \"solid\" : \"regular\") +\" fa-thumbs-down\"}\r\n                                                                    onClick={e => handleDislikeResponse(e, idx)}></i>\r\n                                                            </span>\r\n                                                            {idx === chats.length - 1 &&\r\n                                                            <span className=\"ms-2\">\r\n                                                                <i type=\"button\" className=\"fa-solid fa-arrows-rotate\"\r\n                                                                    onClick={e => {\r\n                                                                        regenerateResponse(e, idx);\r\n                                                                    }}></i>\r\n                                                            </span>}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>}\r\n                                        </div>\r\n                                    )\r\n                                })}\r\n                                \r\n                                {(chats.filter(chat => chat.role === \"user\").length > chats.filter(chat => chat.role === \"assistant\").length\r\n                                && chats.at(-1).role === \"user\") &&\r\n                                <div className=\"d-flex flex-column-reverse justify-content-start my-1\">\r\n                                    <div className=\"d-flex align-items-center bg-white p-2 rounded-pill\">\r\n                                        <div className=\"spinner-grow spinner-grow-sm text-danger mx-1\" role=\"status\">\r\n                                        </div>\r\n                                        <div className=\"spinner-grow spinner-grow-sm text-success mx-1\" role=\"status\">\r\n                                        </div>\r\n                                        <div className=\"spinner-grow spinner-grow-sm text-primary mx-1\" role=\"status\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n\r\n                                {imageSrc &&\r\n                                <div className=\"d-flex justify-content-center align-items-start my-1\">\r\n                                    <div className=\"card shadow-lg position-relative\">\r\n                                        <div className=\"card-header p-0\">\r\n                                            <img src={imageSrc} alt=\"\" className=\"uploaded-image\" />\r\n                                        </div>\r\n                                        <div className=\"position-absolute end-0 m-1\">\r\n                                            <div className=\"btn btn-danger rounded-circle\" onClick={clearImage}>\r\n                                                <i className=\"fa fa-close\"></i>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>}\r\n\r\n                                </div>\r\n                            </div>\r\n                                \r\n                            <div className={`${theme === \"light\" ? \"bg-light\" : \"\"} border-top p-3 rounded-0`}>\r\n                                <form ref={formRef} onSubmit={handleSubmit} className=\"bg-white rounded-pill\">\r\n                                    <div className=\"d-flex align-items-center form-inputs\">\r\n                                        {\r\n                                            isRecording ?\r\n                                            <button className=\"btn btn-light ms-2 me-1 border rounded-pill\" type=\"button\"\r\n                                                onClick={stopRecording}>\r\n                                                <span className=\"text-danger spinner-grow spinner-grow-sm\" aria-hidden=\"true\"></span>\r\n                                            </button>\r\n                                            :\r\n                                            <label className=\"btn btn-light ms-2 me-1 border rounded-pill\"\r\n                                                onClick={isRecording ? stopRecording : startRecording}>\r\n                                                <i className=\"px-1 fa-solid fa-microphone-lines\"></i>\r\n                                            </label>\r\n                                        }\r\n                                        <label htmlFor=\"image\" className=\"btn btn-light mx-1 border rounded-pill\">\r\n                                            <i className=\"fa-regular fa-images\"></i>\r\n                                        </label>\r\n                                        <input type=\"file\" id=\"image\" className=\"d-none\" accept=\"image/*\" ref={imageRef}\r\n                                            onChange={e => handleImageUpload(e)} />\r\n                                        <textarea type=\"text\" placeholder=\"Chat with BeaverAI\"\r\n                                            className=\"form-control border-0 rounded-0 py-3 overflow-auto d-flex flex-column\"\r\n                                            rows={1}\r\n                                            ref={messageRef}\r\n                                            value={message}\r\n                                            onChange={e => setMessage(e.target.value)}\r\n                                            onKeyDown={e => {\r\n                                                if (e.key === 'Enter' && !e.shiftKey) {\r\n                                                    e.preventDefault();\r\n                                                   formRef.current.requestSubmit();\r\n                                                }\r\n                                            }}\r\n                                            style={{ resize: 'none', maxHeight: `${200}px` }}  />\r\n                                        <button className={`btn btn-${disableBtn ? \"secondary\" : \"dark\"} rounded-pill ms-1 me-2`} type=\"submit\"\r\n                                            disabled={disableBtn}>\r\n                                            <i className=\"p-1 fa fa-arrow-up\"></i>\r\n                                        </button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                            {(chats.length === 0 && !imageSrc) &&\r\n                            <div className=\"position-absolute top-50 start-50 translate-middle text-center\">\r\n                                <div className=\"card text-center shadow-lg p-2 w-100\">\r\n                                    <div className={`card-body py-5 bg-${theme} text-${theme === \"light\" ? \"dark\" : \"light\"}`}>\r\n                                        <h5 className=\"card-title fs-3\">Hey! What's up ?</h5>\r\n                                        <p className=\"card-text\">I'm Beaver chatbot. An intelligent chatbot from Beaver Intelligence Corp.</p>\r\n                                        <div className=\"spinner-grow text-primary\" role=\"status\"> </div>\r\n                                        <div className=\"spinner-grow text-success\" role=\"status\"> </div>\r\n                                        <div className=\"spinner-grow text-danger\" role=\"status\"> </div>\r\n                                        <div className=\"spinner-grow text-warning\" role=\"status\"> </div>\r\n                                        <div className=\"spinner-grow text-info\" role=\"status\"> </div>\r\n                                        <p className=\"mt-5 fs-5\">What's on your mind ?</p>\r\n                                        <p className=\"font-italic\">Please go a head and write it over whatever it is!</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatContainer;"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,UAAU,QAAQ,OAAO;AAC/D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,WAAW,QAAQ,yBAAyB;AACrD,OAAOC,OAAO,MAAM,WAAW;AAC/B,SAASC,KAAK,QAAQ,WAAW;AACjC,OAAO,6BAA6B;AACpC,OAAOC,CAAC,MAAM,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvB,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAMC,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAC9B;EACA,MAAM;IAAEW,IAAI;IAAEC;EAAM,CAAC,GAAGb,UAAU,CAACE,WAAW,CAAC;EAC/C,MAAM;IAAEY,KAAK;IAAEC,QAAQ;IAAEC;EAAU,CAAC,GAAGhB,UAAU,CAACG,WAAW,CAAC;EAC9D,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACsB,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAMwB,SAAS,GAAGtB,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM,CAACuB,UAAU,EAAEC,aAAa,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAAC2B,aAAa,EAAEC,gBAAgB,CAAC,GAAG5B,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtD,MAAM,CAAC6B,WAAW,EAAEC,cAAc,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EACrD;EACA,MAAM+B,gBAAgB,GAAG7B,MAAM,CAAC,IAAI,CAAC;EACrC,MAAM8B,cAAc,GAAG9B,MAAM,CAAC,EAAE,CAAC;EACjC,MAAM+B,SAAS,GAAG/B,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAMgC,QAAQ,GAAGhC,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMiC,QAAQ,GAAGjC,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMkC,OAAO,GAAGlC,MAAM,CAAC,IAAI,CAAC;EAC5B,MAAMmC,UAAU,GAAGnC,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAM,CAACoC,QAAQ,EAAEC,WAAW,CAAC,GAAGvC,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACwC,UAAU,EAAEC,aAAa,CAAC,GAAGzC,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAAC0C,WAAW,EAAEC,cAAc,CAAC,GAAG3C,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM4C,gBAAgB,GAAG,0CAA0C;EAEnE3C,SAAS,CAAC,MAAM;IACZ,IAAGkB,SAAS,EAAC;MACTL,QAAQ,CAAC,SAASK,SAAS,EAAE,CAAC;MAC9B,MAAM0B,UAAU,GAAG,MAAAA,CAAA,KAAY;QAC3B,MAAMC,IAAI,GAAG,MAAMC,KAAK,CAAC,8BAA8B,GAAG5B,SAAS,CAAC;QACpE,MAAM6B,MAAM,GAAG,MAAMF,IAAI,CAACG,IAAI,CAAC,CAAC;QAChC/B,QAAQ,CAAC8B,MAAM,CAACE,IAAI,CAAC;MACzB,CAAC;MACDL,UAAU,CAAC,CAAC;IAChB;EACJ,CAAC,EAAE,CAAC1B,SAAS,EAAEL,QAAQ,EAAEI,QAAQ,CAAC,CAAC;EAEnCjB,SAAS,CAAC,MAAM;IACZ,IAAGc,IAAI,CAACoC,IAAI,EAAC;MACTvB,gBAAgB,CAAC;QACbwB,IAAI,EAAE,QAAQ;QACdC,OAAO,EAAE;AACzB;AACA;AACA,kBAAkB,IAAIC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,CAAC,GAAG,IAAID,IAAI,CAAC,CAAC,CAACE,kBAAkB,CAAC,CAAC;AACnF;AACA,kBAAmBzC,IAAI,CAACoC,IAAI,CAACM,UAAU,GAAG1C,IAAI,CAACoC,IAAI,CAACM,UAAU,GAAG1C,IAAI,CAACoC,IAAI,CAACO,KAAK;AAChF;AACA;MACY,CAAC,CAAC;IACN;EACJ,CAAC,EAAE,CAAC3C,IAAI,CAAC,CAAC;EAEVd,SAAS,CAAC,MAAM;IACZ,IAAImB,OAAO,IAAIA,OAAO,CAACuC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MACpCjC,aAAa,CAAC,KAAK,CAAC;IACtB,CAAC,MAAM;MACLA,aAAa,CAAC,IAAI,CAAC;IACrB;EACJ,CAAC,EAAE,CAACN,OAAO,CAAC,CAAC;EAEbnB,SAAS,CAAC,MAAM;IACZuB,SAAS,CAACoC,OAAO,CAACC,QAAQ,CAAC;MACvBC,GAAG,EAAEtC,SAAS,CAACoC,OAAO,CAACG,YAAY;MACnCC,QAAQ,EAAE;IACd,CAAC,CAAC;IACF,IAAI1B,QAAQ,EAAE;MACV2B,UAAU,CAAC,MAAM;QACbzC,SAAS,CAACoC,OAAO,CAACC,QAAQ,CAAC;UACvBC,GAAG,EAAEtC,SAAS,CAACoC,OAAO,CAACG,YAAY;UACnCC,QAAQ,EAAE;QACd,CAAC,CAAC;MACN,CAAC,EAAE,IAAI,CAAC;IACZ;EACJ,CAAC,EAAE,CAAC/C,KAAK,EAAEqB,QAAQ,CAAC,CAAC;EAErB,MAAM4B,YAAY,GAAG,MAAAA,CAAOC,CAAC,EAAEC,GAAG,KAAK;IACnCD,CAAC,CAACE,cAAc,CAAC,CAAC;IAClB,IAAIC,KAAK,GAAG;MACRlB,IAAI,EAAE,MAAM;MACZC,OAAO,EAAEe,GAAG,GAAGA,GAAG,GAAGhD,OAAO;MAC5BmD,KAAK,EAAEpC,QAAQ,CAACyB,OAAO,CAACY,KAAK,GAAGC,GAAG,CAACC,eAAe,CAACvC,QAAQ,CAACyB,OAAO,CAACe,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG;IACrF,CAAC;IACDtD,UAAU,CAAC,EAAE,CAAC;IACdK,aAAa,CAAC,IAAI,CAAC;IACnBR,QAAQ,CAACD,KAAK,IAAI,CAAC,GAAGA,KAAK,EAAEqD,KAAK,CAAC,CAAC;IACpC,IAAGA,KAAK,CAACC,KAAK,EAAC;MACX,MAAMK,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE3C,QAAQ,CAACyB,OAAO,CAACe,KAAK,CAAC,CAAC,CAAC,CAAC;MACnDC,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAER,KAAK,CAACjB,OAAO,CAAC;MAC1CuB,QAAQ,CAACE,MAAM,CAAC,KAAK,EAAE/D,IAAI,CAACoC,IAAI,CAAC4B,EAAE,CAAC;MACpCH,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAE3D,SAAS,CAAC;MACvC6D,UAAU,CAAC,CAAC;MACZ,MAAMlC,IAAI,GAAG,MAAMC,KAAK,CAAC,8BAA8B,EAAC;QACpDkC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEN;MACV,CAAC,CAAC;MAEF,IAAG9B,IAAI,CAACqC,MAAM,KAAK,GAAG,EAAC;QACnB,MAAMnC,MAAM,GAAG,MAAMF,IAAI,CAACG,IAAI,CAAC,CAAC;QAChC/B,QAAQ,CAACD,KAAK,IACV,CACI,GAAGA,KAAK,CAACmE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EACrBpC,MAAM,CAACG,IAAI,EACXH,MAAM,CAACqC,SAAS,CAEvB,CAAC;MACN;IACJ,CAAC,MACG;MACA,MAAMvC,IAAI,GAAG,MAAMC,KAAK,CAAC,wBAAwB,EAAE;QAC/CkC,MAAM,EAAE,MAAM;QACdK,OAAO,EAAE;UACL,cAAc,EAAE;QACpB,CAAC;QACDJ,IAAI,EAAEK,IAAI,CAACC,SAAS,CAAC;UACjBC,QAAQ,EAAE,CAAC9D,aAAa,EAAE,GAAGV,KAAK,EAAEqD,KAAK,CAAC;UAC1CoB,GAAG,EAAE3E,IAAI,CAACoC,IAAI,CAAC4B,EAAE;UACjB5D,SAAS,EAAEA;QACf,CAAC;MACL,CAAC,CAAC;MAEF,IAAG2B,IAAI,CAACqC,MAAM,KAAK,GAAG,EAAC;QACnB,MAAMnC,MAAM,GAAG,MAAMF,IAAI,CAACG,IAAI,CAAC,CAAC;QAChC/B,QAAQ,CAACD,KAAK,IAAI,CAAC,GAAGA,KAAK,CAACmE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAEpC,MAAM,CAACG,IAAI,EAAEH,MAAM,CAACqC,SAAS,CAAC,CAAC;MAC7E;IACJ;EACJ,CAAC;EAED,MAAMM,mBAAmB,GAAG,MAAAA,CAAA,KAAW;IACnC,IAAG;MACC,MAAMC,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;QAAEC,KAAK,EAAE;MAAI,CAAC,CAAC;MACxE/D,SAAS,CAAC2B,OAAO,GAAGgC,MAAM;MAC1BK,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;MACxC,OAAON,MAAM;IACjB,CAAC,QAAMO,KAAK,EAAC;MACTF,OAAO,CAACE,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClD,OAAO,IAAI;IACf;EACJ,CAAC;EAED,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAW;IAC9B,MAAMR,MAAM,GAAG,MAAMD,mBAAmB,CAAC,CAAC;IAC1C,IAAGC,MAAM,EAAC;MACN7D,gBAAgB,CAAC6B,OAAO,GAAG,IAAIyC,aAAa,CAACT,MAAM,CAAC;MACpD5D,cAAc,CAAC4B,OAAO,GAAG,EAAE;MAE3B7B,gBAAgB,CAAC6B,OAAO,CAAC0C,eAAe,GAAInC,CAAC,IAAK;QAC9CnC,cAAc,CAAC4B,OAAO,CAAC2C,IAAI,CAACpC,CAAC,CAACjB,IAAI,CAAC;MACvC,CAAC;MAEDnB,gBAAgB,CAAC6B,OAAO,CAAC4C,MAAM,GAAG,MAAM;QACpC,MAAMC,SAAS,GAAG,IAAIC,IAAI,CAAC1E,cAAc,CAAC4B,OAAO,EAAE;UAAE+C,IAAI,EAAE;QAAa,CAAC,CAAC;QAC1E;QACAC,WAAW,CAACH,SAAS,CAAC;MAC1B,CAAC;MAED1E,gBAAgB,CAAC6B,OAAO,CAACiD,KAAK,CAAC,CAAC;MAChCZ,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;MAChCpE,cAAc,CAAC,IAAI,CAAC;IACxB;EACJ,CAAC;EAED,MAAMgF,aAAa,GAAGA,CAAA,KAAM;IACxB/E,gBAAgB,CAAC6B,OAAO,CAACmD,IAAI,CAAC,CAAC;IAC/BjF,cAAc,CAAC,KAAK,CAAC;IACrB,IAAIG,SAAS,CAAC2B,OAAO,EAAE;MACnB3B,SAAS,CAAC2B,OAAO,CAACoD,SAAS,CAAC,CAAC,CAACC,OAAO,CAACC,KAAK,IAAIA,KAAK,CAACH,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9D9E,SAAS,CAAC2B,OAAO,GAAG,IAAI;IAC5B;IACAqC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;EACrC,CAAC;EAED,MAAMU,WAAW,GAAG,MAAOZ,KAAK,IAAK;IACjC,MAAMmB,WAAW,GAAG,MAAMnB,KAAK,CAACmB,WAAW,CAAC,CAAC;IAC7C,MAAMC,QAAQ,GAAG,MAAMrE,KAAK,CAAC,mDAAmD,EAAE;MAC9EkC,MAAM,EAAE,MAAM;MACdK,OAAO,EAAE;QACL,cAAc,EAAE,YAAY;QAC5B,eAAe,EAAE,SAAS1C,gBAAgB;MAC9C,CAAC;MACDsC,IAAI,EAAEiC;IACV,CAAC,CAAC;IAEF,MAAMnE,MAAM,GAAG,MAAMoE,QAAQ,CAACnE,IAAI,CAAC,CAAC;IACpC,IAAID,MAAM,CAACqE,OAAO,IAAIrE,MAAM,CAACqE,OAAO,CAACC,QAAQ,IAAItE,MAAM,CAACqE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,IACvEtE,MAAM,CAACqE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACC,YAAY,IAAIvE,MAAM,CAACqE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACC,YAAY,CAAC,CAAC,CAAC,EAAE;MACvF,MAAMC,iBAAiB,GAAGxE,MAAM,CAACqE,OAAO,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACC,YAAY,CAAC,CAAC,CAAC,CAACE,UAAU;MAC/EpG,UAAU,CAACmG,iBAAiB,CAAC;MAC7BnF,UAAU,CAACuB,OAAO,CAAC8D,KAAK,CAAC,CAAC;MAC1BzB,OAAO,CAACC,GAAG,CAACsB,iBAAiB,CAAC;IAClC;IACA;EACJ,CAAC;EAED,MAAMG,iBAAiB,GAAG,MAAMxD,CAAC,IAAK;IAClC,MAAMyD,IAAI,GAAGzD,CAAC,CAAC0D,MAAM,CAAClD,KAAK,CAAC,CAAC,CAAC;IAC9B,IAAGiD,IAAI,EAAC;MACJ,MAAME,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAI7D,CAAC,IAAK;QACnB5B,WAAW,CAAC4B,CAAC,CAAC0D,MAAM,CAAC7E,MAAM,CAAC;QAC5BX,UAAU,CAACuB,OAAO,CAAC8D,KAAK,CAAC,CAAC;MAC9B,CAAC;MACDI,MAAM,CAACG,aAAa,CAACL,IAAI,CAAC;IAC9B;EACJ,CAAC;EAED,MAAM5C,UAAU,GAAGA,CAAA,KAAM;IACrBzC,WAAW,CAAC,IAAI,CAAC;IACjB,IAAIJ,QAAQ,CAACyB,OAAO,EAAE;MACpBzB,QAAQ,CAACyB,OAAO,CAACY,KAAK,GAAG,IAAI;IAC/B;EACJ,CAAC;EAED,MAAM0D,gBAAgB,GAAIC,KAAK,IAAK;IAChC,MAAMnF,MAAM,GAAG/B,KAAK,CAACmH,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAKH,KAAK,CAAC;IAChD,IAAGnF,MAAM,CAAC+B,EAAE,EAAC;MACTtC,aAAa,CAAC,8BAA8B,GAAGO,MAAM,CAACuB,KAAK,CAAC;IAChE,CAAC,MAAI;MACD9B,aAAa,CAACO,MAAM,CAACuB,KAAK,CAAC;IAC/B;IACA,MAAMgE,KAAK,GAAG,IAAI/H,KAAK,CAAC0B,QAAQ,CAAC0B,OAAO,EAAE;MACtC4E,QAAQ,EAAE;IACd,CAAC,CAAC;IACFD,KAAK,CAACE,IAAI,CAAC,CAAC;EAChB,CAAC;EAED,MAAMC,YAAY,GAAG,MAAAA,CAAOvE,CAAC,EAAEwE,IAAI,KAAK;IACpC,IAAIC,MAAM,CAACC,eAAe,CAACC,QAAQ,EAAE;MACjCF,MAAM,CAACC,eAAe,CAACE,MAAM,CAAC,CAAC;MAC/BtI,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACmB,WAAW,CAAC,yBAAyB,CAAC,CAACC,QAAQ,CAAC,wBAAwB,CAAC;IACzF,CAAC,MAAI;MACD,MAAMC,SAAS,GAAG,IAAIC,wBAAwB,CAACR,IAAI,CAAC;MACpDO,SAAS,CAACE,KAAK,GAAG,CAAC,CAAC,CAAC;MACrBF,SAAS,CAACG,IAAI,GAAG,CAAC,CAAC,CAAE;MACrBH,SAAS,CAACI,MAAM,GAAG,CAAC,CAAC,CAAC;MACtBJ,SAAS,CAACK,IAAI,GAAG,OAAO,CAAC,CAAC;MAC1BL,SAAS,CAACM,KAAK,GAAIZ,MAAM,CAACC,eAAe,CAACY,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MACxDP,SAAS,CAACQ,KAAK,GAAG,MAAM;QACpBzF,UAAU,CAAC,MAAM;UACbxD,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACmB,WAAW,CAAC,yBAAyB,CAAC,CAACC,QAAQ,CAAC,wBAAwB,CAAC;QACzF,CAAC,EAAE,GAAG,CAAC;MACX,CAAC;MACDL,MAAM,CAACC,eAAe,CAACc,KAAK,CAACT,SAAS,CAAC;IAC3C;EACJ,CAAC;EAED,MAAMU,kBAAkB,GAAG,MAAAA,CAAOzF,CAAC,EAAEgE,KAAK,KAAK;IAC3C,MAAMd,OAAO,GAAIc,KAAK,IAAI,CAAC,IAAIA,KAAK,GAAGlH,KAAK,CAAC4I,MAAM,GAAI5I,KAAK,CAAC6I,MAAM,CAAC3B,KAAK,GAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI;IACtF,KAAI,IAAInF,MAAM,IAAIqE,OAAO,EAAC;MACtB,IAAIvE,IAAI,GAAG,MAAMC,KAAK,CAAC,4BAA4B,GAAGC,MAAM,CAAC+B,EAAE,EAAE;QAC7DE,MAAM,EAAE;MACZ,CAAC,CAAC;MACFgB,OAAO,CAACC,GAAG,CAACpD,IAAI,CAAC;IACrB;IACA,IAAIiH,IAAI,GAAG1C,OAAO,CAAC2C,EAAE,CAAC,CAAC,CAAC;IACxB9I,QAAQ,CAACD,KAAK,CAAC;IAEf,IAAG8I,IAAI,CAACxF,KAAK,EAAC;MACV,MAAM6C,QAAQ,GAAG,MAAMrE,KAAK,CAACgH,IAAI,CAACxF,KAAK,CAAC;MACxC,MAAM0F,IAAI,GAAG,MAAM7C,QAAQ,CAAC6C,IAAI,CAAC,CAAC;MAClC,MAAMC,QAAQ,GAAGH,IAAI,CAACxF,KAAK,CAAC4F,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC;MAC5C,MAAMxC,IAAI,GAAG,IAAIyC,IAAI,CAAC,CAACJ,IAAI,CAAC,EAAEC,QAAQ,EAAE;QAAEvD,IAAI,EAAEsD,IAAI,CAACtD;MAAK,CAAC,CAAC;MAC5D,MAAM2D,SAAS,GAAGnI,QAAQ,CAACyB,OAAO;MAClC,MAAM2G,YAAY,GAAG,IAAIC,YAAY,CAAC,CAAC;MACvCD,YAAY,CAACE,KAAK,CAACC,GAAG,CAAC9C,IAAI,CAAC;MAC5B0C,SAAS,CAAC3F,KAAK,GAAG4F,YAAY,CAAC5F,KAAK;IACxC;IACAT,YAAY,CAACC,CAAC,EAAE4F,IAAI,CAAC1G,OAAO,CAAC;EACjC,CAAC;EAED,MAAMsH,UAAU,GAAIhC,IAAI,IAAK;IACzB,OAAOA,IAAI,CACNiC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CACtBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CACvBA,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC;EAChC,CAAC;EAED,MAAMC,YAAY,GAAIC,IAAI,IAAK;IAC3B,OAAOA,IAAI,CACNF,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CACtBA,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CACrBA,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CACrBA,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CACvBA,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC;EAChC,CAAC;EAED,MAAMG,aAAa,GAAIpC,IAAI,IAAK;IAC5B,IAAIqC,aAAa,GAAGL,UAAU,CAAChC,IAAI,CAAC;IACpCqC,aAAa,GAAGA,aAAa,CAACJ,OAAO,CAAC,gBAAgB,EAAE,qBAAqB,CAAC;IAC9EI,aAAa,GAAGA,aAAa,CAACJ,OAAO,CAAC,mBAAmB,EACrD;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,CAAC;IACZI,aAAa,GAAGA,aAAa,CAACJ,OAAO,CAAC,YAAY,EAAE,iBAAiB,CAAC;IACtEI,aAAa,GAAGA,aAAa,CAACJ,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC;IACpD,OAAOI,aAAa;EACxB,CAAC;EAEDvK,CAAC,CAACwK,QAAQ,CAAC,CAACC,EAAE,CAAC,OAAO,EAAE,cAAc,EAAE,YAAW;IAC/C,IAAIC,OAAO,GAAG1K,CAAC,CAAC,IAAI,CAAC,CAAC2K,OAAO,CAAC,iBAAiB,CAAC,CAAChD,IAAI,CAAC,MAAM,CAAC,CAAC0C,IAAI,CAAC,CAAC;IACpE,IAAIO,aAAa,GAAGR,YAAY,CAACM,OAAO,CAAC;IACzC,IAAIG,SAAS,GAAGD,aAAa,CAACT,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC;IAC1D/E,SAAS,CAAC0F,SAAS,CAACC,SAAS,CAACF,SAAS,CAAC,CAACG,IAAI,CAAC,MAAM;MAChDhL,CAAC,CAAC,IAAI,CAAC,CAACuI,WAAW,CAAC,YAAY,CAAC,CAACC,QAAQ,CAAC,cAAc,CAAC;MAC1DxI,CAAC,CAAC,IAAI,CAAC,CAAC2H,IAAI,CAAC,GAAG,CAAC,CAACsD,KAAK,CAAC,CAAC,CAAC1C,WAAW,CAAC,oBAAoB,CAAC,CAACC,QAAQ,CAAC,mBAAmB,CAAC;MACzFxI,CAAC,CAAC,IAAI,CAAC,CAAC2H,IAAI,CAAC,MAAM,CAAC,CAACsD,KAAK,CAAC,CAAC,CAACZ,IAAI,CAAC,SAAS,CAAC;MAC5C7G,UAAU,CAAC,MAAM;QACbxD,CAAC,CAAC,IAAI,CAAC,CAACuI,WAAW,CAAC,cAAc,CAAC,CAACC,QAAQ,CAAC,YAAY,CAAC;QAC1DxI,CAAC,CAAC,IAAI,CAAC,CAAC2H,IAAI,CAAC,GAAG,CAAC,CAACsD,KAAK,CAAC,CAAC,CAAC1C,WAAW,CAAC,mBAAmB,CAAC,CAACC,QAAQ,CAAC,oBAAoB,CAAC;QACzFxI,CAAC,CAAC,IAAI,CAAC,CAAC2H,IAAI,CAAC,MAAM,CAAC,CAACsD,KAAK,CAAC,CAAC,CAACZ,IAAI,CAAC,MAAM,CAAC;MAC7C,CAAC,EAAE,IAAI,CAAC;IACZ,CAAC,CAAC,CAACa,KAAK,CAAEC,GAAG,IAAK;MACd3F,OAAO,CAACC,GAAG,CAAC0F,GAAG,CAAC;IACpB,CAAC,CAAC;EACN,CAAC,CAAC;EAEF,MAAMC,qBAAqB,GAAG,MAAAA,CAAO1H,CAAC,EAAE2H,GAAG,KAAK;IAC5C,IAAIC,YAAY,GAAG9K,KAAK,CAACmH,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAGwD,GAAG,CAAC;IAChD,MAAMhJ,IAAI,GAAG,MAAMC,KAAK,CAAC,sCAAsC,EAAE;MAC7DkC,MAAM,EAAE,KAAK;MACbC,IAAI,EAAEK,IAAI,CAACC,SAAS,CAAC;QACjB,GAAGuG,YAAY;QACfC,QAAQ,EAAE;MACd,CAAC;IACL,CAAC,CAAC;IACF/F,OAAO,CAACC,GAAG,CAACpD,IAAI,CAAC;IACjB5B,QAAQ,CAACD,KAAK,IAAIA,KAAK,CAACgL,GAAG,CAAC,CAAClC,IAAI,EAAEzB,CAAC,KAAK;MACrC,IAAGA,CAAC,KAAKwD,GAAG,EAAC;QACT,OAAO;UAAC,GAAG/B,IAAI;UAAEiC,QAAQ,EAAE,CAACjC,IAAI,CAACiC;QAAQ,CAAC;MAC9C;MACA,OAAOjC,IAAI;IACf,CAAC,CAAC,CAAC;EACP,CAAC;EAED,MAAMmC,qBAAqB,GAAG,MAAAA,CAAO/H,CAAC,EAAE2H,GAAG,GAAC,IAAI,EAAEK,IAAI,GAAC,IAAI,KAAK;IAC5D1L,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACuD,OAAO,CAAC,sBAAsB,CAAC,CAACM,KAAK,CAAC,CAAC,CAACtD,IAAI,CAAC,iBAAiB,CAAC,CAACsD,KAAK,CAAC,CAAC,CAAC1C,WAAW,CAAC,QAAQ,CAAC;IACzGvI,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACuD,OAAO,CAAC,sBAAsB,CAAC,CAACM,KAAK,CAAC,CAAC,CAACtD,IAAI,CAAC,aAAa,CAAC,CAACsD,KAAK,CAAC,CAAC,CAAC1C,WAAW,CAAC,QAAQ,CAAC;IACrGvI,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACuD,OAAO,CAAC,sBAAsB,CAAC,CAACM,KAAK,CAAC,CAAC,CAACtD,IAAI,CAAC,cAAc,CAAC,CAACsD,KAAK,CAAC,CAAC,CAACzC,QAAQ,CAAC,QAAQ,CAAC;IACnG,IAAG6C,GAAG,KAAK,IAAI,IAAIK,IAAI,EAAC;MACpB,MAAM9E,OAAO,GAAIyE,GAAG,IAAI,CAAC,IAAIA,GAAG,GAAG7K,KAAK,CAAC4I,MAAM,GAAG,CAAC,GAAI5I,KAAK,CAAC6I,MAAM,CAACgC,GAAG,EAAE,CAAC,CAAC,GAAG,IAAI;MAClF,KAAI,IAAI9I,MAAM,IAAIqE,OAAO,EAAC;QACtB,IAAIvE,IAAI,GAAG,MAAMC,KAAK,CAAC,4BAA4B,GAAGC,MAAM,CAAC+B,EAAE,EAAE;UAC7DE,MAAM,EAAE;QACZ,CAAC,CAAC;QACFgB,OAAO,CAACC,GAAG,CAACpD,IAAI,CAAC;MACrB;MACA5B,QAAQ,CAACD,KAAK,CAAC;MACfiD,YAAY,CAACC,CAAC,EAAE7C,QAAQ,CAAC;MACzBC,WAAW,CAAC,EAAE,CAAC;IACnB;EACJ,CAAC;EAED,MAAM6K,qBAAqB,GAAGA,CAACjI,CAAC,EAAEgE,KAAK,KAAK;IACxC,MAAMkE,UAAU,GAAGpL,KAAK,CAACmH,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAKH,KAAK,CAAC;IACpD,IAAGkE,UAAU,EAAE9K,WAAW,CAAC8K,UAAU,CAAChJ,OAAO,CAAC;IAC9C5C,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACuD,OAAO,CAAC,sBAAsB,CAAC,CAACM,KAAK,CAAC,CAAC,CAACtD,IAAI,CAAC,iBAAiB,CAAC,CAACsD,KAAK,CAAC,CAAC,CAACzC,QAAQ,CAAC,QAAQ,CAAC;IACtGxI,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACuD,OAAO,CAAC,sBAAsB,CAAC,CAACM,KAAK,CAAC,CAAC,CAACtD,IAAI,CAAC,aAAa,CAAC,CAACsD,KAAK,CAAC,CAAC,CAACzC,QAAQ,CAAC,QAAQ,CAAC;IAClGxI,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACuD,OAAO,CAAC,sBAAsB,CAAC,CAACM,KAAK,CAAC,CAAC,CAACtD,IAAI,CAAC,cAAc,CAAC,CAACsD,KAAK,CAAC,CAAC,CAAC1C,WAAW,CAAC,QAAQ,CAAC;IACtGvI,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACuD,OAAO,CAAC,sBAAsB,CAAC,CAACM,KAAK,CAAC,CAAC,CAACtD,IAAI,CAAC,UAAU,CAAC,CAACsD,KAAK,CAAC,CAAC,CAAChE,KAAK,CAAC,CAAC;EACxF,CAAC;EAED,oBACI/G,OAAA;IAAK2L,SAAS,EAAC,gBAAgB;IAAAC,QAAA,eAC3B5L,OAAA;MAAK2L,SAAS,EAAC,4BAA4B;MAAAC,QAAA,gBACvC5L,OAAA;QAAK2L,SAAS,EAAE,OAAO,IAAI5J,WAAW,GAAG,UAAU,GAAG,QAAQ,CAAE;QAAA6J,QAAA,eAC5D5L,OAAA,CAACJ,OAAO;UAACkI,IAAI,EAAE/F,WAAY;UAAC8J,aAAa,EAAEA,CAAA,KAAM7J,cAAc,CAAC8J,CAAC,IAAI,CAACA,CAAC;QAAE;UAAAvC,QAAA,EAAAwC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAA1C,QAAA,EAAAwC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3E,CAAC,EACL,CAAClK,WAAW,iBACb/B,OAAA;QAAK2L,SAAS,EAAE,8BAA8B,IAAItL,KAAK,KAAK,OAAO,GAAG,MAAM,GAAG,OAAO,CAAE;QACpF6L,OAAO,EAAEA,CAAA,KAAMlK,cAAc,CAAC8J,CAAC,IAAI,CAACA,CAAC,CAAE;QAAAF,QAAA,eACvC5L,OAAA;UAAGgG,IAAI,EAAC,QAAQ;UAAC2F,SAAS,EAAC;QAAuC;UAAApC,QAAA,EAAAwC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAA1C,QAAA,EAAAwC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtE,CAAC,eAENjM,OAAA;QAAK2L,SAAS,EAAE,OAAO,IAAI5J,WAAW,GAAG,UAAU,GAAE,WAAW,CAAE;QAAA6J,QAAA,gBAC9D5L,OAAA;UAAK2L,SAAS,EAAC,YAAY;UAACQ,GAAG,EAAE5K,QAAS;UAAC,oBAAiB,QAAQ;UAAC6K,QAAQ,EAAC,IAAI;UAAAR,QAAA,eAC9E5L,OAAA;YAAK2L,SAAS,EAAC,+BAA+B;YAAAC,QAAA,eAC1C5L,OAAA;cAAK2L,SAAS,EAAC,eAAe;cAAAC,QAAA,gBAC1B5L,OAAA;gBAAK2L,SAAS,EAAC,cAAc;gBAAAC,QAAA,gBACzB5L,OAAA;kBAAI2L,SAAS,EAAC,kBAAkB;kBAACU,EAAE,EAAC,mBAAmB;kBAAAT,QAAA,EAAC;gBAAa;kBAAArC,QAAA,EAAAwC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC1EjM,OAAA;kBAAQgG,IAAI,EAAC,QAAQ;kBAAC2F,SAAS,EAAC,WAAW;kBAAC,mBAAgB,OAAO;kBAAC,cAAW;gBAAO;kBAAApC,QAAA,EAAAwC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAS,CAAC;cAAA;gBAAA1C,QAAA,EAAAwC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/F,CAAC,eACNjM,OAAA;gBAAK2L,SAAS,EAAC,+DAA+D;gBAAAC,QAAA,eAC1E5L,OAAA;kBAAKsM,GAAG,EAAEzK,UAAW;kBAAC0K,GAAG,EAAC,EAAE;kBAACZ,SAAS,EAAC;gBAAO;kBAAApC,QAAA,EAAAwC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAA1C,QAAA,EAAAwC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChD,CAAC;YAAA;cAAA1C,QAAA,EAAAwC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL;UAAC;YAAA1C,QAAA,EAAAwC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL;QAAC;UAAA1C,QAAA,EAAAwC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eACNjM,OAAA;UAAK2L,SAAS,EAAE,yBAA0B;UAAAC,QAAA,eACtC5L,OAAA;YAAK2L,SAAS,EAAE,oBAAoBtL,KAAK,KAAK,OAAO,GAAG,OAAO,GAAE,WAAW,SAASA,KAAK,KAAK,OAAO,GAAG,MAAM,GAAE,OAAO,EAAG;YAAAuL,QAAA,gBACvH5L,OAAA;cAAK2L,SAAS,EAAC,oDAAoD;cAC/Da,KAAK,EAAE;gBAACC,SAAS,EAAE,MAAM;gBAAEC,SAAS,EAAE;cAAO,CAAE;cAC/CP,GAAG,EAAEtL,SAAU;cAAA+K,QAAA,eACf5L,OAAA;gBAAK2L,SAAS,EAAC,oBAAoB;gBAAAC,QAAA,GAClCtL,KAAK,CAACgL,GAAG,CAAC,CAAClC,IAAI,EAAE+B,GAAG,KAAK;kBACtB,oBACInL,OAAA;oBAAA4L,QAAA,GACKxC,IAAI,CAAC3G,IAAI,KAAK,MAAM,iBACrBzC,OAAA;sBAAK2L,SAAS,EAAC,qCAAqC;sBAAAC,QAAA,eAChD5L,OAAA;wBAAK2L,SAAS,EAAC,uEAAuE;wBAAAC,QAAA,gBAClF5L,OAAA;0BAAK2L,SAAS,EAAC,MAAM;0BAAAC,QAAA,gBACjB5L,OAAA;4BAAK2L,SAAS,EAAC,4BAA4B;4BAAAC,QAAA,GACrCxC,IAAI,CAACxF,KAAK,IAAIwF,IAAI,CAAChF,EAAE,iBACvBpE,OAAA;8BAAKsM,GAAG,EAAElD,IAAI,CAACxF,KAAK,GAAI,8BAA8B,GAAGwF,IAAI,CAACxF,KAAK,GAAG,IAAK;8BACvE2I,GAAG,EAAC,EAAE;8BAACZ,SAAS,EAAC,yBAAyB;8BAC1C3F,IAAI,EAAC,QAAQ;8BAACkG,OAAO,EAAEA,CAAA,KAAM3E,gBAAgB,CAAC4D,GAAG;4BAAE;8BAAA5B,QAAA,EAAAwC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAM,CAAC,EAG5D7C,IAAI,CAACxF,KAAK,IAAI,CAACwF,IAAI,CAAChF,EAAE,iBACxBpE,OAAA;8BAAKsM,GAAG,EAAElD,IAAI,CAACxF,KAAM;8BAAC2I,GAAG,EAAC,EAAE;8BAACZ,SAAS,EAAC,yBAAyB;8BAC5D3F,IAAI,EAAC,QAAQ;8BAACkG,OAAO,EAAEA,CAAA,KAAM3E,gBAAgB,CAAC4D,GAAG;4BAAE;8BAAA5B,QAAA,EAAAwC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAM,CAAC;0BAAA;4BAAA1C,QAAA,EAAAwC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAE7D,CAAC,eACNjM,OAAA;4BAAK2L,SAAS,EAAC,yCAAyC;4BAAAC,QAAA,gBACpD5L,OAAA;8BAAK2L,SAAS,EAAC,gBAAgB;8BAACO,OAAO,EAAE1I,CAAC,IAAIiI,qBAAqB,CAACjI,CAAC,EAAE2H,GAAG,CAAE;8BAAAS,QAAA,eACxE5L,OAAA;gCAAM2L,SAAS,EAAC,8BAA8B;gCAAAC,QAAA,eAC1C5L,OAAA;kCAAG2L,SAAS,EAAC;gCAA0B;kCAAApC,QAAA,EAAAwC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OAAI;8BAAC;gCAAA1C,QAAA,EAAAwC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAC1C;4BAAC;8BAAA1C,QAAA,EAAAwC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACN,CAAC,eACNjM,OAAA;8BAAK2L,SAAS,EAAE,mBAAmBtL,KAAK,EAAG;8BACvCmM,KAAK,EAAE;gCAACG,UAAU,EAAE;8BAAU,CAAE;8BAAAf,QAAA,EAC/BxC,IAAI,CAAC1G;4BAAO;8BAAA6G,QAAA,EAAAwC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACZ,CAAC;0BAAA;4BAAA1C,QAAA,EAAAwC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACL,CAAC;wBAAA;0BAAA1C,QAAA,EAAAwC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACL,CAAC,eACNjM,OAAA;0BAAK2L,SAAS,EAAC,0BAA0B;0BAAAC,QAAA,gBACrC5L,OAAA;4BAAU2L,SAAS,EAAC,iCAAiC;4BACjDiB,IAAI,EAAE,CAAE;4BACRC,OAAO,EAAErJ,CAAC,IAAI;8BACVA,CAAC,CAAC0D,MAAM,CAACsF,KAAK,CAACM,MAAM,GAAG,MAAM;8BAC9BtJ,CAAC,CAAC0D,MAAM,CAACsF,KAAK,CAACM,MAAM,GAAG,GAAGtJ,CAAC,CAAC0D,MAAM,CAAC9D,YAAY,IAAI;4BACxD,CAAE;4BACFS,KAAK,EAAElD,QAAS;4BAChBoM,QAAQ,EAAEvJ,CAAC,IAAI;8BACX5C,WAAW,CAAC4C,CAAC,CAAC0D,MAAM,CAACrD,KAAK,CAAC;8BAC3BL,CAAC,CAAC0D,MAAM,CAACsF,KAAK,CAACM,MAAM,GAAG,MAAM;8BAC9BtJ,CAAC,CAAC0D,MAAM,CAACsF,KAAK,CAACM,MAAM,GAAG,GAAGtJ,CAAC,CAAC0D,MAAM,CAAC9D,YAAY,IAAI;4BACxD;0BAAE;4BAAAmG,QAAA,EAAAwC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAW,CAAC,eAClBjM,OAAA;4BAAK2L,SAAS,EAAC,4BAA4B;4BAAAC,QAAA,gBACvC5L,OAAA;8BAAQ2L,SAAS,EAAC,0BAA0B;8BACxCO,OAAO,EAAE1I,CAAC,IAAI+H,qBAAqB,CAAC/H,CAAC,CAAE;8BAAAoI,QAAA,EAAC;4BAAM;8BAAArC,QAAA,EAAAwC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAQ,CAAC,eAC3DjM,OAAA;8BAAQ2L,SAAS,EAAC,yBAAyB;8BACvCO,OAAO,EAAE1I,CAAC,IAAI+H,qBAAqB,CAAC/H,CAAC,EAAE2H,GAAG,EAAE,IAAI,CAAE;8BAAAS,QAAA,EAAC;4BAAI;8BAAArC,QAAA,EAAAwC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAQ,CAAC;0BAAA;4BAAA1C,QAAA,EAAAwC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACnE,CAAC;wBAAA;0BAAA1C,QAAA,EAAAwC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACL,CAAC,eACNjM,OAAA;0BAAM2L,SAAS,EAAC,WAAW;0BAAAC,QAAA,eACvB5L,OAAA;4BAAM2L,SAAS,EAAC,sIAAsI;4BAClJa,KAAK,EAAE;8BAAEQ,KAAK,EAAE,SAAS;8BAAEF,MAAM,EAAE;4BAAU,CAAE;4BAAAlB,QAAA,EAC9CxL,IAAI,CAACoC,IAAI,CAACO,KAAK,CAACkK,MAAM,CAAC,CAAC;0BAAC;4BAAA1D,QAAA,EAAAwC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACxB;wBAAC;0BAAA1C,QAAA,EAAAwC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACL,CAAC;sBAAA;wBAAA1C,QAAA,EAAAwC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACN;oBAAC;sBAAA1C,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACL,CAAC,EACL7C,IAAI,CAAC3G,IAAI,KAAK,WAAW,iBAC1BzC,OAAA;sBAAK2L,SAAS,EAAC,uCAAuC;sBAAAC,QAAA,eAClD5L,OAAA;wBAAK2L,SAAS,EAAC,qDAAqD;wBAAAC,QAAA,gBAChE5L,OAAA;0BAAM2L,SAAS,EAAC,WAAW;0BAAAC,QAAA,eACvB5L,OAAA;4BAAKsM,GAAG,EAAC,kBAAkB;4BAACC,GAAG,EAAC,EAAE;4BAC9BZ,SAAS,EAAC;0BAA4B;4BAAApC,QAAA,EAAAwC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAE;wBAAC;0BAAA1C,QAAA,EAAAwC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAC3C,CAAC,eACPjM,OAAA;0BAAK2L,SAAS,EAAC,oBAAoB;0BAACa,KAAK,EAAE;4BAACU,QAAQ,EAAE;0BAAO,CAAE;0BAAAtB,QAAA,gBAC3D5L,OAAA;4BACImN,uBAAuB,EAAE;8BAACC,MAAM,EAAEhD,aAAa,CAAChB,IAAI,CAAC1G,OAAO;4BAAC;0BAAE;4BAAA6G,QAAA,EAAAwC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAC7D,CAAC,eACPjM,OAAA;4BAAK2L,SAAS,EAAE,4BAA4B,IAAItL,KAAK,KAAK,OAAO,GAAG,MAAM,GAAG,OAAO,CAAG;4BAAAuL,QAAA,gBACnF5L,OAAA;8BAAM2L,SAAS,EAAC,MAAM;8BAAAC,QAAA,eAClB5L,OAAA;gCAAGgG,IAAI,EAAC,QAAQ;gCAAC2F,SAAS,EAAC,yBAAyB;gCAChDO,OAAO,EAAE1I,CAAC,IAAI;kCACV1D,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACmB,WAAW,CAAC,yBAAyB,CAAC,CAACC,QAAQ,CAAC,mBAAmB,CAAC;kCAChFpD,SAAS,CAAC0F,SAAS,CAACC,SAAS,CAACzB,IAAI,CAAC1G,OAAO,CAAC,CAACoI,IAAI,CAAC,MAAM;oCACnDxF,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;kCACzD,CAAC,CAAC,CAACyF,KAAK,CAAEC,GAAG,IAAK;oCACd3F,OAAO,CAACE,KAAK,CAAC,uBAAuB,EAAEyF,GAAG,CAAC;kCAC/C,CAAC,CAAC;kCACF3H,UAAU,CAAC,MAAM;oCACbxD,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACmB,WAAW,CAAC,mBAAmB,CAAC,CAACC,QAAQ,CAAC,yBAAyB,CAAC;kCACpF,CAAC,EAAE,IAAI,CAAC;gCACZ;8BAAE;gCAAAiB,QAAA,EAAAwC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAI;4BAAC;8BAAA1C,QAAA,EAAAwC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACT,CAAC,eACPjM,OAAA;8BAAM2L,SAAS,EAAC,MAAM;8BAAAC,QAAA,eAClB5L,OAAA;gCAAGgG,IAAI,EAAC,QAAQ;gCAAC2F,SAAS,EAAC,wBAAwB;gCAC/CO,OAAO,EAAE1I,CAAC,IAAI;kCACV1D,CAAC,CAAC0D,CAAC,CAAC0D,MAAM,CAAC,CAACmB,WAAW,CAAC,wBAAwB,CAAC,CAACC,QAAQ,CAAC,yBAAyB,CAAC;kCACrFP,YAAY,CAACvE,CAAC,EAAE4F,IAAI,CAAC1G,OAAO,CAAC;gCACjC;8BAAE;gCAAA6G,QAAA,EAAAwC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAI;4BAAC;8BAAA1C,QAAA,EAAAwC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACT,CAAC,eACPjM,OAAA;8BAAM2L,SAAS,EAAC,MAAM;8BAAAC,QAAA,eAClB5L,OAAA;gCAAGgG,IAAI,EAAC,QAAQ;gCAAC2F,SAAS,EAAE,KAAK,IAAGvC,IAAI,CAACiC,QAAQ,GAAG,OAAO,GAAG,SAAS,CAAC,GAAE,iBAAkB;gCACxFa,OAAO,EAAE1I,CAAC,IAAI0H,qBAAqB,CAAC1H,CAAC,EAAE2H,GAAG;8BAAE;gCAAA5B,QAAA,EAAAwC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAI;4BAAC;8BAAA1C,QAAA,EAAAwC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACnD,CAAC,EACNd,GAAG,KAAK7K,KAAK,CAAC4I,MAAM,GAAG,CAAC,iBACzBlJ,OAAA;8BAAM2L,SAAS,EAAC,MAAM;8BAAAC,QAAA,eAClB5L,OAAA;gCAAGgG,IAAI,EAAC,QAAQ;gCAAC2F,SAAS,EAAC,2BAA2B;gCAClDO,OAAO,EAAE1I,CAAC,IAAI;kCACVyF,kBAAkB,CAACzF,CAAC,EAAE2H,GAAG,CAAC;gCAC9B;8BAAE;gCAAA5B,QAAA,EAAAwC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAI;4BAAC;8BAAA1C,QAAA,EAAAwC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACT,CAAC;0BAAA;4BAAA1C,QAAA,EAAAwC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACN,CAAC;wBAAA;0BAAA1C,QAAA,EAAAwC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACL,CAAC;sBAAA;wBAAA1C,QAAA,EAAAwC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACL;oBAAC;sBAAA1C,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACL,CAAC;kBAAA,GAxGAd,GAAG;oBAAA5B,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAyGR,CAAC;gBAEd,CAAC,CAAC,EAEA3L,KAAK,CAAC+M,MAAM,CAACjE,IAAI,IAAIA,IAAI,CAAC3G,IAAI,KAAK,MAAM,CAAC,CAACyG,MAAM,GAAG5I,KAAK,CAAC+M,MAAM,CAACjE,IAAI,IAAIA,IAAI,CAAC3G,IAAI,KAAK,WAAW,CAAC,CAACyG,MAAM,IACzG5I,KAAK,CAAC+I,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC5G,IAAI,KAAK,MAAM,iBAC/BzC,OAAA;kBAAK2L,SAAS,EAAC,uDAAuD;kBAAAC,QAAA,eAClE5L,OAAA;oBAAK2L,SAAS,EAAC,qDAAqD;oBAAAC,QAAA,gBAChE5L,OAAA;sBAAK2L,SAAS,EAAC,+CAA+C;sBAAClJ,IAAI,EAAC;oBAAQ;sBAAA8G,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACvE,CAAC,eACNjM,OAAA;sBAAK2L,SAAS,EAAC,gDAAgD;sBAAClJ,IAAI,EAAC;oBAAQ;sBAAA8G,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACxE,CAAC,eACNjM,OAAA;sBAAK2L,SAAS,EAAC,gDAAgD;sBAAClJ,IAAI,EAAC;oBAAQ;sBAAA8G,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACxE,CAAC;kBAAA;oBAAA1C,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL;gBAAC;kBAAA1C,QAAA,EAAAwC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL,CAAC,EAELtK,QAAQ,iBACT3B,OAAA;kBAAK2L,SAAS,EAAC,sDAAsD;kBAAAC,QAAA,eACjE5L,OAAA;oBAAK2L,SAAS,EAAC,kCAAkC;oBAAAC,QAAA,gBAC7C5L,OAAA;sBAAK2L,SAAS,EAAC,iBAAiB;sBAAAC,QAAA,eAC5B5L,OAAA;wBAAKsM,GAAG,EAAE3K,QAAS;wBAAC4K,GAAG,EAAC,EAAE;wBAACZ,SAAS,EAAC;sBAAgB;wBAAApC,QAAA,EAAAwC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAA1C,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACvD,CAAC,eACNjM,OAAA;sBAAK2L,SAAS,EAAC,6BAA6B;sBAAAC,QAAA,eACxC5L,OAAA;wBAAK2L,SAAS,EAAC,+BAA+B;wBAACO,OAAO,EAAE7H,UAAW;wBAAAuH,QAAA,eAC/D5L,OAAA;0BAAG2L,SAAS,EAAC;wBAAa;0BAAApC,QAAA,EAAAwC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAI;sBAAC;wBAAA1C,QAAA,EAAAwC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAC9B;oBAAC;sBAAA1C,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACL,CAAC;kBAAA;oBAAA1C,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL;gBAAC;kBAAA1C,QAAA,EAAAwC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL,CAAC;cAAA;gBAAA1C,QAAA,EAAAwC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAED;YAAC;cAAA1C,QAAA,EAAAwC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC,eAENjM,OAAA;cAAK2L,SAAS,EAAE,GAAGtL,KAAK,KAAK,OAAO,GAAG,UAAU,GAAG,EAAE,2BAA4B;cAAAuL,QAAA,eAC9E5L,OAAA;gBAAMmM,GAAG,EAAE1K,OAAQ;gBAAC6L,QAAQ,EAAE/J,YAAa;gBAACoI,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,eACzE5L,OAAA;kBAAK2L,SAAS,EAAC,uCAAuC;kBAAAC,QAAA,GAE9C1K,WAAW,gBACXlB,OAAA;oBAAQ2L,SAAS,EAAC,6CAA6C;oBAAC3F,IAAI,EAAC,QAAQ;oBACzEkG,OAAO,EAAE/F,aAAc;oBAAAyF,QAAA,eACvB5L,OAAA;sBAAM2L,SAAS,EAAC,0CAA0C;sBAAC,eAAY;oBAAM;sBAAApC,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO;kBAAC;oBAAA1C,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACjF,CAAC,gBAETjM,OAAA;oBAAO2L,SAAS,EAAC,6CAA6C;oBAC1DO,OAAO,EAAEhL,WAAW,GAAGiF,aAAa,GAAGV,cAAe;oBAAAmG,QAAA,eACtD5L,OAAA;sBAAG2L,SAAS,EAAC;oBAAmC;sBAAApC,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI;kBAAC;oBAAA1C,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClD,CAAC,eAEZjM,OAAA;oBAAOuN,OAAO,EAAC,OAAO;oBAAC5B,SAAS,EAAC,wCAAwC;oBAAAC,QAAA,eACrE5L,OAAA;sBAAG2L,SAAS,EAAC;oBAAsB;sBAAApC,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI;kBAAC;oBAAA1C,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACrC,CAAC,eACRjM,OAAA;oBAAOgG,IAAI,EAAC,MAAM;oBAACqG,EAAE,EAAC,OAAO;oBAACV,SAAS,EAAC,QAAQ;oBAAC6B,MAAM,EAAC,SAAS;oBAACrB,GAAG,EAAE3K,QAAS;oBAC5EuL,QAAQ,EAAEvJ,CAAC,IAAIwD,iBAAiB,CAACxD,CAAC;kBAAE;oBAAA+F,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,eAC3CjM,OAAA;oBAAUgG,IAAI,EAAC,MAAM;oBAACyH,WAAW,EAAC,oBAAoB;oBAClD9B,SAAS,EAAC,uEAAuE;oBACjFiB,IAAI,EAAE,CAAE;oBACRT,GAAG,EAAEzK,UAAW;oBAChBmC,KAAK,EAAEpD,OAAQ;oBACfsM,QAAQ,EAAEvJ,CAAC,IAAI9C,UAAU,CAAC8C,CAAC,CAAC0D,MAAM,CAACrD,KAAK,CAAE;oBAC1C6J,SAAS,EAAElK,CAAC,IAAI;sBACZ,IAAIA,CAAC,CAACmK,GAAG,KAAK,OAAO,IAAI,CAACnK,CAAC,CAACoK,QAAQ,EAAE;wBAClCpK,CAAC,CAACE,cAAc,CAAC,CAAC;wBACnBjC,OAAO,CAACwB,OAAO,CAAC4K,aAAa,CAAC,CAAC;sBAClC;oBACJ,CAAE;oBACFrB,KAAK,EAAE;sBAAEsB,MAAM,EAAE,MAAM;sBAAEpB,SAAS,EAAE,GAAG,GAAG;oBAAK;kBAAE;oBAAAnD,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC,eACzDjM,OAAA;oBAAQ2L,SAAS,EAAE,WAAW7K,UAAU,GAAG,WAAW,GAAG,MAAM,yBAA0B;oBAACkF,IAAI,EAAC,QAAQ;oBACnG+H,QAAQ,EAAEjN,UAAW;oBAAA8K,QAAA,eACrB5L,OAAA;sBAAG2L,SAAS,EAAC;oBAAoB;sBAAApC,QAAA,EAAAwC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI;kBAAC;oBAAA1C,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClC,CAAC;gBAAA;kBAAA1C,QAAA,EAAAwC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACR;cAAC;gBAAA1C,QAAA,EAAAwC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ;YAAC;cAAA1C,QAAA,EAAAwC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,EACJ3L,KAAK,CAAC4I,MAAM,KAAK,CAAC,IAAI,CAACvH,QAAQ,iBACjC3B,OAAA;cAAK2L,SAAS,EAAC,gEAAgE;cAAAC,QAAA,eAC3E5L,OAAA;gBAAK2L,SAAS,EAAC,sCAAsC;gBAAAC,QAAA,eACjD5L,OAAA;kBAAK2L,SAAS,EAAE,qBAAqBtL,KAAK,SAASA,KAAK,KAAK,OAAO,GAAG,MAAM,GAAG,OAAO,EAAG;kBAAAuL,QAAA,gBACtF5L,OAAA;oBAAI2L,SAAS,EAAC,iBAAiB;oBAAAC,QAAA,EAAC;kBAAgB;oBAAArC,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,eACrDjM,OAAA;oBAAG2L,SAAS,EAAC,WAAW;oBAAAC,QAAA,EAAC;kBAAyE;oBAAArC,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC,eACtGjM,OAAA;oBAAK2L,SAAS,EAAC,2BAA2B;oBAAClJ,IAAI,EAAC,QAAQ;oBAAAmJ,QAAA,EAAC;kBAAC;oBAAArC,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAChEjM,OAAA;oBAAK2L,SAAS,EAAC,2BAA2B;oBAAClJ,IAAI,EAAC,QAAQ;oBAAAmJ,QAAA,EAAC;kBAAC;oBAAArC,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAChEjM,OAAA;oBAAK2L,SAAS,EAAC,0BAA0B;oBAAClJ,IAAI,EAAC,QAAQ;oBAAAmJ,QAAA,EAAC;kBAAC;oBAAArC,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAC/DjM,OAAA;oBAAK2L,SAAS,EAAC,2BAA2B;oBAAClJ,IAAI,EAAC,QAAQ;oBAAAmJ,QAAA,EAAC;kBAAC;oBAAArC,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAChEjM,OAAA;oBAAK2L,SAAS,EAAC,wBAAwB;oBAAClJ,IAAI,EAAC,QAAQ;oBAAAmJ,QAAA,EAAC;kBAAC;oBAAArC,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAC7DjM,OAAA;oBAAG2L,SAAS,EAAC,WAAW;oBAAAC,QAAA,EAAC;kBAAqB;oBAAArC,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC,eAClDjM,OAAA;oBAAG2L,SAAS,EAAC,aAAa;oBAAAC,QAAA,EAAC;kBAAkD;oBAAArC,QAAA,EAAAwC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC;gBAAA;kBAAA1C,QAAA,EAAAwC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChF;cAAC;gBAAA1C,QAAA,EAAAwC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL;YAAC;cAAA1C,QAAA,EAAAwC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAA1C,QAAA,EAAAwC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL;QAAC;UAAA1C,QAAA,EAAAwC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAA1C,QAAA,EAAAwC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA;MAAA1C,QAAA,EAAAwC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAA1C,QAAA,EAAAwC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAAA/L,EAAA,CA3lBKD,aAAa;EAAA,QACER,WAAW;AAAA;AAAAuO,EAAA,GAD1B/N,aAAa;AA6lBnB,eAAeA,aAAa;AAAC,IAAA+N,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}